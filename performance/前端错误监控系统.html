<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>è¿™ä¸‰å¹´æ²‰æ·€çš„å‰ç«¯é”™è¯¯ç›‘æ§ç³»ç»Ÿï¼Œä¸€ç¯‡æ–‡ç« è®²é€ç»™ä½  | duangdongçš„qa</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/logo.png">
    <link rel="manifest" href="/manifest.json">
    <script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?0088ce24040b03f2947322ab31d23414";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
  </script>
    <script>
  var _hmt = _hmt || [];
  _hmt.push(['_requirePlugin', 'UrlChangeTracker', {
    shouldTrackUrlChange: function (newPath, oldPath) {
      newPath = newPath.split('#')[0];
      oldPath = oldPath.split('#')[0];
      return newPath != oldPath;
    }}
  ]);
  </script>
    <meta name="description" content="å‰ç«¯QAé›†é”¦">
    <meta name="keywords" content="qd-blog,js,vuepress,leetcode,react,reactè¿›é˜¶,css,jsè¿›é˜¶,reactæ€§èƒ½ä¼˜åŒ–,jsè®¾è®¡æ¨¡å¼">
    
    <link rel="preload" href="/assets/css/0.styles.b4a844ec.css" as="style"><link rel="preload" href="/assets/js/app.07981acf.js" as="script"><link rel="preload" href="/assets/js/2.57da4f88.js" as="script"><link rel="preload" href="/assets/js/1.a76cc220.js" as="script"><link rel="preload" href="/assets/js/87.72c01e68.js" as="script"><link rel="prefetch" href="/assets/js/10.50f73657.js"><link rel="prefetch" href="/assets/js/100.ed998eb0.js"><link rel="prefetch" href="/assets/js/101.c8472505.js"><link rel="prefetch" href="/assets/js/102.d600a66c.js"><link rel="prefetch" href="/assets/js/103.c2d41a43.js"><link rel="prefetch" href="/assets/js/104.dc119219.js"><link rel="prefetch" href="/assets/js/105.8707757e.js"><link rel="prefetch" href="/assets/js/106.33c299b9.js"><link rel="prefetch" href="/assets/js/107.8eafcc06.js"><link rel="prefetch" href="/assets/js/108.eeb8c861.js"><link rel="prefetch" href="/assets/js/109.d7579372.js"><link rel="prefetch" href="/assets/js/11.0390ceee.js"><link rel="prefetch" href="/assets/js/110.4cdb688a.js"><link rel="prefetch" href="/assets/js/111.95d0f748.js"><link rel="prefetch" href="/assets/js/112.fae5a13a.js"><link rel="prefetch" href="/assets/js/113.7cefcf49.js"><link rel="prefetch" href="/assets/js/114.49f03fa7.js"><link rel="prefetch" href="/assets/js/115.73eebb69.js"><link rel="prefetch" href="/assets/js/116.3b9205f3.js"><link rel="prefetch" href="/assets/js/117.dc4fcb53.js"><link rel="prefetch" href="/assets/js/118.1191553b.js"><link rel="prefetch" href="/assets/js/119.705d33d0.js"><link rel="prefetch" href="/assets/js/12.f88bec36.js"><link rel="prefetch" href="/assets/js/120.d3227497.js"><link rel="prefetch" href="/assets/js/121.32bcc7c2.js"><link rel="prefetch" href="/assets/js/122.55a7d973.js"><link rel="prefetch" href="/assets/js/123.07b3f53a.js"><link rel="prefetch" href="/assets/js/124.851c0100.js"><link rel="prefetch" href="/assets/js/125.c1de1f95.js"><link rel="prefetch" href="/assets/js/126.ea96a075.js"><link rel="prefetch" href="/assets/js/127.bcf311b8.js"><link rel="prefetch" href="/assets/js/128.e1c4d95e.js"><link rel="prefetch" href="/assets/js/129.09afee9c.js"><link rel="prefetch" href="/assets/js/13.963ad03b.js"><link rel="prefetch" href="/assets/js/130.22372a24.js"><link rel="prefetch" href="/assets/js/131.4db39cda.js"><link rel="prefetch" href="/assets/js/132.afcfdf65.js"><link rel="prefetch" href="/assets/js/133.35b0df52.js"><link rel="prefetch" href="/assets/js/134.9ad9188e.js"><link rel="prefetch" href="/assets/js/135.d7ca4b93.js"><link rel="prefetch" href="/assets/js/136.403dc2de.js"><link rel="prefetch" href="/assets/js/137.f972aed9.js"><link rel="prefetch" href="/assets/js/138.7536ef7d.js"><link rel="prefetch" href="/assets/js/139.05186195.js"><link rel="prefetch" href="/assets/js/14.512f15b9.js"><link rel="prefetch" href="/assets/js/140.f7b5e550.js"><link rel="prefetch" href="/assets/js/141.16938126.js"><link rel="prefetch" href="/assets/js/142.0d18982a.js"><link rel="prefetch" href="/assets/js/143.f82390e5.js"><link rel="prefetch" href="/assets/js/144.bac62f6d.js"><link rel="prefetch" href="/assets/js/145.255f2397.js"><link rel="prefetch" href="/assets/js/146.226da4b5.js"><link rel="prefetch" href="/assets/js/147.236f8a9f.js"><link rel="prefetch" href="/assets/js/148.8d472c06.js"><link rel="prefetch" href="/assets/js/149.4170f8c0.js"><link rel="prefetch" href="/assets/js/15.a674496c.js"><link rel="prefetch" href="/assets/js/150.ff7b0269.js"><link rel="prefetch" href="/assets/js/151.0a1c7058.js"><link rel="prefetch" href="/assets/js/152.584c412a.js"><link rel="prefetch" href="/assets/js/153.220d027b.js"><link rel="prefetch" href="/assets/js/154.09a9219e.js"><link rel="prefetch" href="/assets/js/155.6c8dbf71.js"><link rel="prefetch" href="/assets/js/156.a9d81dce.js"><link rel="prefetch" href="/assets/js/157.e53c1adb.js"><link rel="prefetch" href="/assets/js/158.11f55456.js"><link rel="prefetch" href="/assets/js/159.2c05d7f2.js"><link rel="prefetch" href="/assets/js/16.ed7e507f.js"><link rel="prefetch" href="/assets/js/160.27616923.js"><link rel="prefetch" href="/assets/js/17.de667ca5.js"><link rel="prefetch" href="/assets/js/18.b44e84af.js"><link rel="prefetch" href="/assets/js/19.5b5ad6a1.js"><link rel="prefetch" href="/assets/js/20.6800493a.js"><link rel="prefetch" href="/assets/js/21.6589052c.js"><link rel="prefetch" href="/assets/js/22.f648d829.js"><link rel="prefetch" href="/assets/js/23.21fe11d7.js"><link rel="prefetch" href="/assets/js/24.7a3e65b2.js"><link rel="prefetch" href="/assets/js/25.9e2d6c46.js"><link rel="prefetch" href="/assets/js/26.0dcf1d19.js"><link rel="prefetch" href="/assets/js/27.bd79a51b.js"><link rel="prefetch" href="/assets/js/28.ad9cdafd.js"><link rel="prefetch" href="/assets/js/29.738a8c4a.js"><link rel="prefetch" href="/assets/js/3.13e892f5.js"><link rel="prefetch" href="/assets/js/30.5d2ae7ae.js"><link rel="prefetch" href="/assets/js/31.2a59449c.js"><link rel="prefetch" href="/assets/js/32.322ed58f.js"><link rel="prefetch" href="/assets/js/33.e18917c7.js"><link rel="prefetch" href="/assets/js/34.edfe8355.js"><link rel="prefetch" href="/assets/js/35.2c0b1e3e.js"><link rel="prefetch" href="/assets/js/36.b1fdf51f.js"><link rel="prefetch" href="/assets/js/37.11ee0b0c.js"><link rel="prefetch" href="/assets/js/38.0b050ca5.js"><link rel="prefetch" href="/assets/js/39.2bd20762.js"><link rel="prefetch" href="/assets/js/4.5bdb9365.js"><link rel="prefetch" href="/assets/js/40.eb0c66c8.js"><link rel="prefetch" href="/assets/js/41.933044bc.js"><link rel="prefetch" href="/assets/js/42.eac4ba39.js"><link rel="prefetch" href="/assets/js/43.8c61e37d.js"><link rel="prefetch" href="/assets/js/44.30f132bb.js"><link rel="prefetch" href="/assets/js/45.2477f9bb.js"><link rel="prefetch" href="/assets/js/46.e97df854.js"><link rel="prefetch" href="/assets/js/47.60f16a00.js"><link rel="prefetch" href="/assets/js/48.d01b463f.js"><link rel="prefetch" href="/assets/js/49.e3a15fc7.js"><link rel="prefetch" href="/assets/js/5.7c68fdb5.js"><link rel="prefetch" href="/assets/js/50.31265493.js"><link rel="prefetch" href="/assets/js/51.ed2cc5dc.js"><link rel="prefetch" href="/assets/js/52.3ae02665.js"><link rel="prefetch" href="/assets/js/53.69d15c58.js"><link rel="prefetch" href="/assets/js/54.bbab20a0.js"><link rel="prefetch" href="/assets/js/55.9617cf7e.js"><link rel="prefetch" href="/assets/js/56.13f9aef2.js"><link rel="prefetch" href="/assets/js/57.ba08cc35.js"><link rel="prefetch" href="/assets/js/58.63028d02.js"><link rel="prefetch" href="/assets/js/59.566c0b50.js"><link rel="prefetch" href="/assets/js/6.c8da7ca7.js"><link rel="prefetch" href="/assets/js/60.0801f3b3.js"><link rel="prefetch" href="/assets/js/61.ceae0570.js"><link rel="prefetch" href="/assets/js/62.9f28e1a4.js"><link rel="prefetch" href="/assets/js/63.15282044.js"><link rel="prefetch" href="/assets/js/64.7c666983.js"><link rel="prefetch" href="/assets/js/65.320c4670.js"><link rel="prefetch" href="/assets/js/66.253bab14.js"><link rel="prefetch" href="/assets/js/67.49c1e967.js"><link rel="prefetch" href="/assets/js/68.ae82def1.js"><link rel="prefetch" href="/assets/js/69.0877ad54.js"><link rel="prefetch" href="/assets/js/7.e4c88d0e.js"><link rel="prefetch" href="/assets/js/70.5e8208ea.js"><link rel="prefetch" href="/assets/js/71.52cb4845.js"><link rel="prefetch" href="/assets/js/72.8c575d51.js"><link rel="prefetch" href="/assets/js/73.b9ba874e.js"><link rel="prefetch" href="/assets/js/74.6b4693bb.js"><link rel="prefetch" href="/assets/js/75.e9378ce1.js"><link rel="prefetch" href="/assets/js/76.a80b13fc.js"><link rel="prefetch" href="/assets/js/77.d134968d.js"><link rel="prefetch" href="/assets/js/78.40d99cd8.js"><link rel="prefetch" href="/assets/js/79.2b663044.js"><link rel="prefetch" href="/assets/js/80.0b63f3ac.js"><link rel="prefetch" href="/assets/js/81.bc4031db.js"><link rel="prefetch" href="/assets/js/82.3152c02c.js"><link rel="prefetch" href="/assets/js/83.3fa2dc4b.js"><link rel="prefetch" href="/assets/js/84.e778c959.js"><link rel="prefetch" href="/assets/js/85.060ddc49.js"><link rel="prefetch" href="/assets/js/86.bb8138bb.js"><link rel="prefetch" href="/assets/js/88.e3e56223.js"><link rel="prefetch" href="/assets/js/89.198ff8d1.js"><link rel="prefetch" href="/assets/js/90.6437abb2.js"><link rel="prefetch" href="/assets/js/91.dbe1df52.js"><link rel="prefetch" href="/assets/js/92.6e732f3a.js"><link rel="prefetch" href="/assets/js/93.e98beea7.js"><link rel="prefetch" href="/assets/js/94.c62e88cb.js"><link rel="prefetch" href="/assets/js/95.f6aad986.js"><link rel="prefetch" href="/assets/js/96.e0630547.js"><link rel="prefetch" href="/assets/js/97.3cd76aa5.js"><link rel="prefetch" href="/assets/js/98.3bc2adce.js"><link rel="prefetch" href="/assets/js/99.88c20858.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.5143d2e0.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b4a844ec.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">duangdongçš„qa</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/js/" class="nav-link">
  JSæ–¹é¢
</a></div><div class="nav-item"><a href="/webpack/" class="nav-link">
  Webpack
</a></div><div class="nav-item"><a href="/react/" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/summary/" class="nav-link">
  æ±‡æ€»
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  å¸¸è§ç®—æ³•
</a></div><div class="nav-item"><a href="/performance/" class="nav-link router-link-active">
  æ€§èƒ½ä¼˜åŒ–
</a></div><div class="nav-item"><a href="/http/" class="nav-link">
  ç½‘ç»œåè®®
</a></div><div class="nav-item"><a href="/css/" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/face-sutra/" class="nav-link">
  QA
</a></div><div class="nav-item"><a href="https://link.aduang.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/js/" class="nav-link">
  JSæ–¹é¢
</a></div><div class="nav-item"><a href="/webpack/" class="nav-link">
  Webpack
</a></div><div class="nav-item"><a href="/react/" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/summary/" class="nav-link">
  æ±‡æ€»
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  å¸¸è§ç®—æ³•
</a></div><div class="nav-item"><a href="/performance/" class="nav-link router-link-active">
  æ€§èƒ½ä¼˜åŒ–
</a></div><div class="nav-item"><a href="/http/" class="nav-link">
  ç½‘ç»œåè®®
</a></div><div class="nav-item"><a href="/css/" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/face-sutra/" class="nav-link">
  QA
</a></div><div class="nav-item"><a href="https://link.aduang.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/performance/" aria-current="page" class="sidebar-link">å…«è‚¡æ–‡</a></li><li><a href="/performance/21 é“å…³äºæ€§èƒ½ä¼˜åŒ–çš„é¢è¯•é¢˜.html" class="sidebar-link">21 é“å…³äºæ€§èƒ½ä¼˜åŒ–çš„é¢è¯•é¢˜ï¼ˆé™„ç­”æ¡ˆï¼‰</a></li><li><a href="/performance/JavaScriptå¤æ‚åˆ¤æ–­çš„æ›´ä¼˜é›…å†™æ³•.html" class="sidebar-link">JavaScript å¤æ‚åˆ¤æ–­çš„æ›´ä¼˜é›…å†™æ³•</a></li><li><a href="/performance/ä¸ºä»€ä½ åº”è¯¥ä½¿ç”¨pictureæ ‡ç­¾è€Œä¸æ˜¯Imgæ ‡ç­¾.html" class="sidebar-link">ä¸ºä»€ä½ åº”è¯¥ä½¿ç”¨pictureæ ‡ç­¾è€Œä¸æ˜¯Imgæ ‡ç­¾</a></li><li><a href="/performance/ä»å‰ç«¯æ€§èƒ½ä¼˜åŒ–å¼•ç”³å‡ºæ¥çš„5é“ç»å…¸é¢è¯•é¢˜.html" class="sidebar-link">ä»å‰ç«¯æ€§èƒ½ä¼˜åŒ–å¼•ç”³å‡ºæ¥çš„ 5 é“ç»å…¸é¢è¯•é¢˜</a></li><li><a href="/performance/å‰ç«¯é”™è¯¯ç›‘æ§ç³»ç»Ÿ.html" class="active sidebar-link">è¿™ä¸‰å¹´æ²‰æ·€çš„å‰ç«¯é”™è¯¯ç›‘æ§ç³»ç»Ÿï¼Œä¸€ç¯‡æ–‡ç« è®²é€ç»™ä½ </a></li><li><a href="/performance/æ€§èƒ½ä¼˜åŒ–.html" class="sidebar-link">å†™ç»™ä¸­é«˜çº§å‰ç«¯å…³äºæ€§èƒ½ä¼˜åŒ–çš„9å¤§ç­–ç•¥å’Œ6å¤§æŒ‡æ ‡</a></li><li><a href="/performance/èŠ‚æµé˜²æŠ–.html" class="sidebar-link">å‡½æ•°é˜²æŠ–ä¸èŠ‚æµ</a></li><li><a href="/performance/è¿›åº¦æ¡ä¼˜åŒ–.html" class="sidebar-link">è¿›åº¦æ¡ä¼˜åŒ–</a></li><li><a href="/performance/é€»è¾‘åˆ¤æ–­.html" class="sidebar-link">ç¼–å†™é«˜è´¨é‡å¯ç»´æŠ¤çš„ä»£ç ä¹‹ä¼˜åŒ–é€»è¾‘åˆ¤æ–­</a></li><li><a href="/performance/é™çº§å¤„ç†.html" class="sidebar-link">æµ…æå‰ç«¯å¼‚å¸¸åŠé™çº§å¤„ç†</a></li><li><a href="/performance/é¡¹ç›®ä¸­åšè¿‡å“ªäº›å®‰å…¨é˜²èŒƒæªæ–½.html" class="sidebar-link">ä½ åœ¨é¡¹ç›®ä¸­åšè¿‡å“ªäº›å®‰å…¨é˜²èŒƒæªæ–½ï¼Ÿ</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="è¿™ä¸‰å¹´æ²‰æ·€çš„å‰ç«¯é”™è¯¯ç›‘æ§ç³»ç»Ÿ-ä¸€ç¯‡æ–‡ç« è®²é€ç»™ä½ "><a href="#è¿™ä¸‰å¹´æ²‰æ·€çš„å‰ç«¯é”™è¯¯ç›‘æ§ç³»ç»Ÿ-ä¸€ç¯‡æ–‡ç« è®²é€ç»™ä½ " class="header-anchor">#</a> è¿™ä¸‰å¹´æ²‰æ·€çš„å‰ç«¯é”™è¯¯ç›‘æ§ç³»ç»Ÿï¼Œä¸€ç¯‡æ–‡ç« è®²é€ç»™ä½ </h2> <blockquote><p><a href="https://mp.weixin.qq.com/s/NY72_cRGAPsex78YwVF_hg" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s/NY72_cRGAPsex78YwVF_hg<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h2 id="ç—›ç‚¹"><a href="#ç—›ç‚¹" class="header-anchor">#</a> ç—›ç‚¹</h2> <blockquote><p>æŸâ¼€å¤©äº§å“ï¼šxxx â¼´å‘Šä¸»åé¦ˆæˆ‘ä»¬çš„é¡µé¢æ³¨å†Œä¸äº†ï¼åˆâ¼€å¤©è¿è¥ï¼šè¿™ä¸ªæ´»åŠ¨åœ¨ xxx åª’ä½“ä¸ŠæŒ‚æ‰äº†ï¼</p></blockquote> <p>åœ¨æˆ‘å¸çº¿ä¸Šè¿è¡Œçš„æ˜¯è¿‘äº¿çº§åˆ«çš„å¹¿å‘Šé¡µé¢ï¼Œè¿™æ ·çº¿ä¸Šå¦‚æœè£¸å¥”ï¼Œå‡ºç°äº†ä»€ä¹ˆé—®é¢˜ä¸çŸ¥é“ï¼Œåç½®åœ¨ä¸šåŠ¡ç«¯å‘ç°ï¼Œè¢«ä¸šåŠ¡æ–¹è¯¢é—®ï¼Œè¿™ç§åœºæ™¯å¾ˆå°´å°¬ã€‚</p> <h2 id="é€‰æ‹©"><a href="#é€‰æ‹©" class="header-anchor">#</a> é€‰æ‹©</h2> <p>å…¬å¸å­˜åœ¨å››ä¸ªäº‹ä¸šéƒ¨ï¼Œè€Œæ¯ä¸ªäº‹ä¸šéƒ¨ä¸ä¸‹äº 3 ä¸ªé¡¹ç›®ï¼Œè¿™é‡Œè‡³å°‘ 12 ä¸ªé¡¹ç›®ï¼Œè¿™é‡Œä½œä¸ºä¼ç¬”ï¼Œä¸šåŠ¡çº¿å¤šã€‚</p> <p>æˆ‘ä»¬æ˜¯é€‰æ‹©è‡ªå·±åšå‘¢ï¼Œè¿˜æ˜¯é€‰ç¬¬ä¸‰æ–¹çš„å‘¢ã€‚æˆ‘ä»¬æ¯”è¾ƒä¸€é¡¹å‡ æ¬¾å¸¸è§ç¬¬ä¸‰æ–¹ã€‚</p> <ul><li>Fundebugï¼šä»˜è´¹ç‰ˆ 159 å…ƒ/æœˆèµ·ï¼Œæ•°æ®å­˜åœ¨ç¬¬ä¸‰æ–¹ï¼Œè€Œæ•°æ®è‡ªæˆ‘ä¿å­˜éœ€è¦ 30 ä¸‡/å¹´ã€‚è¿˜æ˜¯å¾ˆè´µçš„ã€‚</li> <li>FrontJSï¼ŒFrontJS é«˜çº§ç‰ˆ 899/æœˆï¼Œä¸“ä¸šç‰ˆæ˜¯ 2999/æœˆã€‚</li> <li>Sentryï¼Œ80 ç¾é‡‘/æœˆã€‚</li></ul> <p>ä»¥ Sentry ä¸ºè®¡è´¹ï¼Œå¯¹è¿™ 12 ä¸ªé¡¹ç›®è®¡ç®—ä¸€ä¸‹ã€‚12 ä¸ªé¡¹ç›®ä¸€å¹´å°†è¿‘ 10 ä¸‡ã€‚è€Œå¤§è‡´ä¼°ç®—è¿‡éœ€è¦ 2 äºº 1.5 æœˆå³ 90 äººæ—¥ï¼Œèƒ½å®Œæˆ MVP ç‰ˆæœ¬ï¼ŒæŒ‰æ¯äºº 1.5 ä¸‡å·¥èµ„/æœˆè®¡ç®—ï¼Œæ€»å…±èŠ±è´¹ 4.5 ä¸‡ï¼Œè€Œä¸”æ˜¯ä¸€åŠ³æ°¸é€¸çš„ã€‚</p> <p>å› æ­¤ä»æˆæœ¬è§’åº¦æˆ‘ä»¬ä¼šé€‰æ‹©è‡ªç ”ï¼Œä½†é™¤äº†æˆæœ¬å¤–ï¼Œè¿˜æœ‰å…¶ä»–åŸå› ã€‚ä¾‹å¦‚æˆ‘ä»¬ä¼šåŸºäºè¿™å¥—ç³»ç»Ÿåšä¸€äº›è‡ªå®šä¹‰åŠŸèƒ½ï¼Œä¸å…¬å¸æƒé™ç”¨æˆ·ç³»ç»Ÿæ‰“é€šï¼Œå†é’ˆå¯¹ç”¨æˆ·è¿›è¡Œ Todo ç®¡ç†ï¼Œå¯¹ç”¨æˆ·è¿›è¡Œé”™è¯¯æ’è¡Œç­‰ã€‚</p> <p>è¿˜æœ‰åŸºäºä¸šåŠ¡æ•°æ®çš„å®‰å…¨ï¼Œæˆ‘ä»¬å¸Œæœ›è‡ªæˆ‘æ­å»ºä¸€ä¸ªç³»ç»Ÿã€‚</p> <p>æ‰€ä»¥ä»æˆæœ¬ã€å®‰å…¨ã€æ‰©å±•æ€§è§’åº¦ï¼Œæˆ‘ä»¬é€‰æ‹©äº†è‡ªå·±ç ”å‘ã€‚</p> <h1 id="äº§å“è®¾è®¡"><a href="#äº§å“è®¾è®¡" class="header-anchor">#</a> äº§å“è®¾è®¡</h1> <blockquote><p>æˆ‘ä»¬è¦ä»€ä¹ˆæ ·çš„ä¸€ä¸ªäº§å“å‘¢ï¼Œæ ¹æ®ç¬¬ä¸€æ€§åŸç†ï¼Œè§£å†³å…³é”®é—®é¢˜â€œæ€ä¹ˆå®šä½é—®é¢˜â€ã€‚é€šè¿‡ 5W1H æ³•æˆ‘ä»¬æ¥åˆ†æï¼Œæˆ‘ä»¬æƒ³è¦çŸ¥é“äº›ä»€ä¹ˆä¿¡æ¯å‘¢ï¼Ÿ</p></blockquote> <h2 id="é”™è¯¯ä¿¡æ¯"><a href="#é”™è¯¯ä¿¡æ¯" class="header-anchor">#</a> é”™è¯¯ä¿¡æ¯</h2> <p>å…¶å®é”™è¯¯ç›‘æ§è¯´ç®€å•å°±ä¸€å¥è¯å¯ä»¥æè¿°ï¼Œæœé›†é¡µé¢é”™è¯¯ï¼Œè¿›è¡Œä¸ŠæŠ¥ï¼Œç„¶åå¯¹ç—‡åˆ†æã€‚</p> <p>æŒ‰ç…§ 5W1H æ³•åˆ™è¿›è¡Œåˆ†æè¿™å¥è¯ï¼Œå¯ä»¥å‘ç°æœ‰å‡ é¡¹éœ€è¦æˆ‘ä»¬å…³æ³¨ã€‚</p> <ol><li>Whatï¼Œå‘â½£äº†ä»€ä¹ˆé”™è¯¯ï¼šé€»è¾‘é”™è¯¯ã€æ•°æ®é”™è¯¯ã€â½¹ç»œé”™è¯¯ã€è¯­æ³•é”™è¯¯ç­‰ã€‚</li> <li>Whenï¼Œå‡ºç°çš„æ—¶é—´æ®µï¼Œå¦‚æ—¶é—´æˆ³ã€‚</li> <li>Whoï¼Œå½±å“äº†å¤šå°‘ç”¨æˆ·ï¼ŒåŒ…æ‹¬æŠ¥é”™äº‹ä»¶æ•°ã€IPã€è®¾å¤‡ä¿¡æ¯ã€‚</li> <li>Whereï¼Œå‡ºç°çš„é¡µé¢æ˜¯å“ªäº›ï¼ŒåŒ…æ‹¬é¡µé¢ã€å¹¿å‘Šä½ï¼ˆæˆ‘å¸ï¼‰ã€åª’ä½“ï¼ˆæˆ‘å¸ï¼‰ã€‚</li> <li>Whyï¼Œé”™è¯¯çš„åŸå› æ˜¯ä¸ºä»€ä¹ˆï¼ŒåŒ…æ‹¬é”™è¯¯å †æ ˆã€â¾åˆ—ã€SourceMapã€‚</li> <li>Howï¼Œæ€ä¹ˆå®šä½è§£å†³é—®é¢˜ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ”¶é›†ç³»ç»Ÿç­‰ä¿¡æ¯ã€‚</li></ol> <h2 id="æ¶æ„å±‚æ¬¡"><a href="#æ¶æ„å±‚æ¬¡" class="header-anchor">#</a> æ¶æ„å±‚æ¬¡</h2> <blockquote><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦æ¢³ç†ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦ä¸€äº›å“ªäº›åŠŸèƒ½ã€‚</p></blockquote> <p>é‚£æˆ‘ä»¬æ€ä¹ˆå¾—åˆ°ä¸Šé¢çš„ä¿¡æ¯è¿›è¡Œæœ€ç»ˆé”™è¯¯çš„å®šä½å‘¢ã€‚</p> <p>é¦–å…ˆæˆ‘ä»¬è‚¯å®šéœ€è¦å¯¹é”™è¯¯è¿›è¡Œæœé›†ï¼Œç„¶åç”¨æˆ·è®¾å¤‡é¡µé¢ç«¯çš„é”™è¯¯æˆ‘ä»¬æ€ä¹ˆæ‰èƒ½æ„ŸçŸ¥åˆ°å‘¢ï¼Œè¿™å°±éœ€è¦è¿›è¡Œä¸ŠæŠ¥ã€‚é‚£ä¹ˆç¬¬ä¸€å±‚å°±å±•ç°å‡ºæ¥äº†ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæœé›†ä¸ŠæŠ¥ç«¯ã€‚</p> <p>é‚£æ€ä¹ˆæ‰èƒ½è¿›è¡Œä¸ŠæŠ¥å‘¢ï¼Œå’Œåç«¯åä½œé‚£ä¹ˆä¹…ï¼Œè‚¯å®šçŸ¥é“çš„å§ ğŸ™ƒ ï¼Œä½ éœ€è¦ä¸€ä¸ªæ¥å£ã€‚é‚£å°±éœ€è¦ä¸€ä¸ªæœåŠ¡å™¨æ¥è¿›è¡Œå¯¹äºä¸ŠæŠ¥çš„é”™è¯¯è¿›è¡Œé‡‡é›†ï¼Œå¯¹äºé”™è¯¯è¿›è¡Œç­›é€‰èšåˆã€‚é‚£ä¹ˆç¬¬äºŒå±‚ä¹ŸçŸ¥é“äº†å•Šï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªé‡‡é›†èšåˆç«¯ã€‚</p> <p>æˆ‘ä»¬æœé›†åˆ°äº†æˆ‘ä»¬è¶³å¤Ÿçš„ç‰©æ–™ä¿¡æ¯äº†ï¼Œé‚£æ¥ä¸‹æ¥è¦æ€ä¹ˆç”¨èµ·æ¥å‘¢ï¼Œæˆ‘ä»¬éœ€è¦æŠŠå®ƒä»¬æŒ‰ç…§æˆ‘ä»¬çš„è§„åˆ™è¿›è¡Œæ•´ç†ã€‚å¦‚æœæ¯æ¬¡åˆæ˜¯é€šè¿‡å†™ç±» SQL è¿›è¡Œæ•´ç†æŸ¥è¯¢æ•ˆç‡ä¼šå¾ˆä½ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¯è§†åŒ–çš„å¹³å°è¿›è¡Œå±•ç¤ºã€‚å› æ­¤æœ‰äº†ç¬¬ä¸‰å±‚ï¼Œå¯è§†åŒ–åˆ†æç«¯ã€‚</p> <p>æ„Ÿè§‰å¥½åƒåšå®Œå•¦ï¼Œæƒ³å¿…å¤§å®¶éƒ½è¿™ä¹ˆæƒ³ï¼Œä¸€ä¸ªé”™è¯¯ç›‘æ§å¹³å°åšå®Œäº†ï¼ŒğŸ™… ã€‚å¦‚æœæ˜¯è¿™æ ·ä½ ä¼šå‘ç°ä¸€ä¸ªç°è±¡ï¼Œæ¯æ¬¡ä¸Šçº¿å’Œä¸Šçº¿åä¸€æ®µæ—¶é—´ï¼Œå¼€å‘åŒå­¦éƒ½ä¸€ç›´ç›¯ç€å±å¹•çœ‹ï¼Œè¿™æ˜¯åœ¨å¹²å˜›ï¼Œäººå½¢çœ¼åŠ¨è§‚å¯Ÿè€…æ¨¡å¼å—ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦é€šè¿‡ä»£ç å»è§£å†³ï¼Œè‡ªç„¶è€Œç„¶ï¼Œç¬¬å››å±‚ï¼Œç›‘æ§å‘Šè­¦ç«¯åº”è¿è€Œç”Ÿã€‚</p> <p>æ‰€ä»¥è¯·å¤§å£°è¯´å‡ºæ¥æˆ‘ä»¬éœ€è¦ä»€ä¹ˆ ğŸ™ˆ ï¼Œæœé›†ä¸ŠæŠ¥ç«¯ï¼Œé‡‡é›†èšåˆç«¯ï¼Œå¯è§†åˆ†æç«¯ï¼Œç›‘æ§å‘Šè­¦ç«¯ã€‚</p> <h1 id="ç³»ç»Ÿè®¾è®¡"><a href="#ç³»ç»Ÿè®¾è®¡" class="header-anchor">#</a> ç³»ç»Ÿè®¾è®¡</h1> <blockquote><p>å¦‚å‡½æ•°ä¸€æ ·ï¼Œå®šä¹‰å¥½æ¯ä¸ªç¯èŠ‚çš„è¾“å…¥å’Œè¾“å‡ºï¼Œä¸”æ ¸å¿ƒéœ€è¦å¤„ç†çš„åŠŸèƒ½ã€‚</p></blockquote> <p>ä¸‹é¢æˆ‘ä»¬çœ‹çœ‹ä¸Šè¿°æ‰€è¯´çš„å››ä¸ªç«¯æ€ä¹ˆå»å®ç°å‘¢ã€‚</p> <h2 id="æœé›†ä¸ŠæŠ¥ç«¯-sdk"><a href="#æœé›†ä¸ŠæŠ¥ç«¯-sdk" class="header-anchor">#</a> æœé›†ä¸ŠæŠ¥ç«¯ï¼ˆSDKï¼‰</h2> <blockquote><p>è¿™ä¸ªç¯èŠ‚ä¸»è¦è¾“å…¥æ˜¯æ‰€æœ‰é”™è¯¯ï¼Œè¾“å‡ºæ˜¯æ•è·ä¸ŠæŠ¥é”™è¯¯ã€‚æ ¸å¿ƒæ˜¯å¤„ç†ä¸åŒç±»å‹é”™è¯¯çš„æœé›†å·¥ä½œã€‚å…¶ä»–æ˜¯ä¸€äº›éæ ¸å¿ƒä½†å¿…è¦çš„å·¥ä½œã€‚</p></blockquote> <h3 id="é”™è¯¯ç±»å‹"><a href="#é”™è¯¯ç±»å‹" class="header-anchor">#</a> é”™è¯¯ç±»å‹</h3> <p>å…ˆçœ‹çœ‹æˆ‘ä»¬éœ€è¦å¤„ç†å“ªäº›é”™è¯¯ç±»å‹ã€‚</p> <p><strong>å¸¸è§ JS æ‰§è¡Œé”™è¯¯</strong></p> <ol><li><p>SyntaxError</p> <blockquote><p>è§£ææ—¶å‘ç”Ÿè¯­æ³•é”™è¯¯</p></blockquote></li></ol> <div class="language- extra-class"><pre class="language-text"><code>// æ§åˆ¶å°è¿è¡Œ
const xx,
</code></pre></div><p>window.onerror æ•è·ä¸åˆ° SyntxErrorï¼Œä¸€èˆ¬ SyntaxError åœ¨æ„å»ºé˜¶æ®µï¼Œç”šè‡³æœ¬åœ°å¼€å‘é˜¶æ®µå°±ä¼šè¢«å‘ç°ã€‚</p> <ol><li><p>TypeError</p> <blockquote><p>å€¼ä¸æ˜¯æ‰€æœŸå¾…çš„ç±»å‹</p></blockquote></li></ol> <div class="language- extra-class"><pre class="language-text"><code>// æ§åˆ¶å°è¿è¡Œ
const person = void 0;
person.name;
</code></pre></div><ol><li><p>ReferenceError</p> <blockquote><p>å¼•ç”¨æœªå£°æ˜çš„å˜é‡</p></blockquote></li></ol> <div class="language- extra-class"><pre class="language-text"><code>// æ§åˆ¶å°è¿è¡Œ
nodefined;
</code></pre></div><ol><li><p>RangeError</p> <blockquote><p>å½“ä¸€ä¸ªå€¼ä¸åœ¨å…¶æ‰€å…è®¸çš„èŒƒå›´æˆ–è€…é›†åˆä¸­</p></blockquote></li></ol> <div class="language- extra-class"><pre class="language-text"><code>(function fn() {
  fn();
})();
</code></pre></div><p><strong>ç½‘ç»œé”™è¯¯</strong></p> <ol><li><p>ResourceError</p> <blockquote><p>èµ„æºåŠ è½½é”™è¯¯</p></blockquote></li></ol> <div class="language- extra-class"><pre class="language-text"><code>new Image().src = &quot;/remote/image/notdeinfed.png&quot;;
</code></pre></div><ol><li><p>HttpError</p> <blockquote><p>Http è¯·æ±‚é”™è¯¯</p></blockquote></li></ol> <div class="language- extra-class"><pre class="language-text"><code>// æ§åˆ¶å°è¿è¡Œ
fetch(&quot;/remote/notdefined&quot;, {});
</code></pre></div><h3 id="æœé›†é”™è¯¯"><a href="#æœé›†é”™è¯¯" class="header-anchor">#</a> æœé›†é”™è¯¯</h3> <p>æ‰€æœ‰èµ·å› æ¥æºäºé”™è¯¯ï¼Œé‚£æˆ‘ä»¬å¦‚ä½•è¿›è¡Œé”™è¯¯æ•è·ã€‚</p> <p><strong>try/catch</strong></p> <blockquote><p>èƒ½æ•è·å¸¸è§„è¿è¡Œæ—¶é”™è¯¯ï¼Œè¯­æ³•é”™è¯¯å’Œå¼‚æ­¥é”™è¯¯ä¸è¡Œ</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>// å¸¸è§„è¿è¡Œæ—¶é”™è¯¯ï¼Œå¯ä»¥æ•è· âœ…
try {
  console.log(notdefined);
} catch(e) {
  console.log('æ•è·åˆ°å¼‚å¸¸ï¼š', e);
}

// è¯­æ³•é”™è¯¯ï¼Œä¸èƒ½æ•è· âŒ
try {
  const notdefined,
} catch(e) {
  console.log('æ•è·åˆ°å¼‚å¸¸ï¼š', e);
}

// å¼‚æ­¥é”™è¯¯ï¼Œä¸èƒ½æ•è· âŒ
try {
  setTimeout(() =&gt; {
    console.log(notdefined);
  }, 0)
} catch(e) {
  console.log('æ•è·åˆ°å¼‚å¸¸ï¼š',e);
}
</code></pre></div><p>try/catch æœ‰å®ƒç»†è‡´å¤„ç†çš„ä¼˜åŠ¿ï¼Œä½†ç¼ºç‚¹ä¹Ÿæ¯”è¾ƒæ˜æ˜¾ã€‚</p> <p><strong>window.onerror</strong></p> <blockquote><p>pure js é”™è¯¯æ”¶é›†ï¼Œwindow.onerrorï¼Œå½“ JS è¿è¡Œæ—¶é”™è¯¯å‘ç”Ÿæ—¶ï¼Œwindow ä¼šè§¦å‘ä¸€ä¸ª ErrorEvent æ¥å£çš„ error äº‹ä»¶ã€‚</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>/**
 * @param {String}  message    é”™è¯¯ä¿¡æ¯
 * @param {String}  source    å‡ºé”™æ–‡ä»¶
 * @param {Number}  lineno    è¡Œå·
 * @param {Number}  colno    åˆ—å·
 * @param {Object}  error  Errorå¯¹è±¡
 */

window.onerror = function (message, source, lineno, colno, error) {
  console.log(&quot;æ•è·åˆ°å¼‚å¸¸ï¼š&quot;, { message, source, lineno, colno, error });
};
</code></pre></div><p>å…ˆéªŒè¯ä¸‹å‡ ä¸ªé”™è¯¯æ˜¯å¦å¯ä»¥æ•è·ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>// å¸¸è§„è¿è¡Œæ—¶é”™è¯¯ï¼Œå¯ä»¥æ•è· âœ…
window.onerror = function(message, source, lineno, colno, error) {
  console.log('æ•è·åˆ°å¼‚å¸¸ï¼š',{message, source, lineno, colno, error});
}
console.log(notdefined);

// è¯­æ³•é”™è¯¯ï¼Œä¸èƒ½æ•è· âŒ
window.onerror = function(message, source, lineno, colno, error) {
  console.log('æ•è·åˆ°å¼‚å¸¸ï¼š',{message, source, lineno, colno, error});
}
const notdefined,

// å¼‚æ­¥é”™è¯¯ï¼Œå¯ä»¥æ•è· âœ…
window.onerror = function(message, source, lineno, colno, error) {
  console.log('æ•è·åˆ°å¼‚å¸¸ï¼š',{message, source, lineno, colno, error});
}
setTimeout(() =&gt; {
  console.log(notdefined);
}, 0)

// èµ„æºé”™è¯¯ï¼Œä¸èƒ½æ•è· âŒ
&lt;script&gt;
  window.onerror = function(message, source, lineno, colno, error) {
  console.log('æ•è·åˆ°å¼‚å¸¸ï¼š',{message, source, lineno, colno, error});
  return true;
}
&lt;/script&gt;
&lt;img src=&quot;https://yun.tuia.cn/image/kkk.png&quot;&gt;
</code></pre></div><p>window.onerror ä¸èƒ½æ•è·èµ„æºé”™è¯¯æ€ä¹ˆåŠï¼Ÿ</p> <p><strong>window.addEventListener</strong></p> <blockquote><p>å½“ä¸€é¡¹èµ„æºï¼ˆå¦‚å›¾ç‰‡æˆ–è„šæœ¬ï¼‰åŠ è½½å¤±è´¥ï¼ŒåŠ è½½èµ„æºçš„å…ƒç´ ä¼šè§¦å‘ä¸€ä¸ª Event æ¥å£çš„ error äº‹ä»¶ï¼Œè¿™äº› error äº‹ä»¶ä¸ä¼šå‘ä¸Šå†’æ³¡åˆ° windowï¼Œä½†èƒ½è¢«æ•è·ã€‚è€Œ window.onerror ä¸èƒ½ç›‘æµ‹æ•è·ã€‚</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>// å›¾ç‰‡ã€scriptã€cssåŠ è½½é”™è¯¯ï¼Œéƒ½èƒ½è¢«æ•è· âœ…
&lt;script&gt;
  window.addEventListener(
    &quot;error&quot;,
    (error) =&gt; {
      console.log(&quot;æ•è·åˆ°å¼‚å¸¸ï¼š&quot;, error);
    },
    true
  );
&lt;/script&gt;
&lt;img src=&quot;https://yun.tuia.cn/image/kkk.png&quot; /&gt;
&lt;script src=&quot;https://yun.tuia.cn/foundnull.js&quot;&gt;&lt;/script&gt;
&lt;link href=&quot;https://yun.tuia.cn/foundnull.css&quot; rel=&quot;stylesheet&quot; /&gt;

// new Imageé”™è¯¯ï¼Œä¸èƒ½æ•è· âŒ
&lt;script&gt;
  window.addEventListener(
    &quot;error&quot;,
    (error) =&gt; {
      console.log(&quot;æ•è·åˆ°å¼‚å¸¸ï¼š&quot;, error);
    },
    true
  );
&lt;/script&gt;
&lt;script&gt;
  new Image().src = &quot;https://yun.tuia.cn/image/lll.png&quot;;
&lt;/script&gt;

// fetché”™è¯¯ï¼Œä¸èƒ½æ•è· âŒ
&lt;script&gt;
  window.addEventListener(
    &quot;error&quot;,
    (error) =&gt; {
      console.log(&quot;æ•è·åˆ°å¼‚å¸¸ï¼š&quot;, error);
    },
    true
  );
&lt;/script&gt;
&lt;script&gt;
  fetch(&quot;https://tuia.cn/test&quot;);
&lt;/script&gt;
</code></pre></div><p>new Image è¿ç”¨çš„æ¯”è¾ƒå°‘ï¼Œå¯ä»¥å•ç‹¬è‡ªå·±å¤„ç†è‡ªå·±çš„é”™è¯¯ã€‚</p> <p>ä½†é€šç”¨çš„ fetch æ€ä¹ˆåŠå‘¢ï¼Œfetch è¿”å› Promiseï¼Œä½† Promise çš„é”™è¯¯ä¸èƒ½è¢«æ•è·ï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿ</p> <p><strong>Promise é”™è¯¯</strong></p> <ol><li><p>æ™®é€š Promise é”™è¯¯</p> <blockquote><p>try/catch ä¸èƒ½æ•è· Promise ä¸­çš„é”™è¯¯</p></blockquote></li></ol> <div class="language- extra-class"><pre class="language-text"><code>// try/catch ä¸èƒ½å¤„ç† JSON.parse çš„é”™è¯¯ï¼Œå› ä¸ºå®ƒåœ¨ Promise ä¸­
try {
  new Promise((resolve, reject) =&gt; {
    JSON.parse(&quot;&quot;);
    resolve();
  });
} catch (err) {
  console.error(&quot;in try catch&quot;, err);
}

// éœ€è¦ä½¿ç”¨catchæ–¹æ³•
new Promise((resolve, reject) =&gt; {
  JSON.parse(&quot;&quot;);
  resolve();
}).catch((err) =&gt; {
  console.log(&quot;in catch fn&quot;, err);
});
</code></pre></div><ol><li><p>async é”™è¯¯</p> <blockquote><p>try/catch ä¸èƒ½æ•è· async åŒ…è£¹çš„é”™è¯¯</p></blockquote></li></ol> <div class="language- extra-class"><pre class="language-text"><code>const getJSON = async () =&gt; {
  throw new Error(&quot;inner error&quot;);
};

// é€šè¿‡try/catchå¤„ç†
const makeRequest = async () =&gt; {
  try {
    // æ•è·ä¸åˆ°
    JSON.parse(getJSON());
  } catch (err) {
    console.log(&quot;outer&quot;, err);
  }
};

try {
  // try/catchä¸åˆ°
  makeRequest();
} catch (err) {
  console.error(&quot;in try catch&quot;, err);
}

try {
  // éœ€è¦awaitï¼Œæ‰èƒ½æ•è·åˆ°
  await makeRequest();
} catch (err) {
  console.error(&quot;in try catch&quot;, err);
}
</code></pre></div><ol><li><p>import chunk é”™è¯¯</p> <blockquote><p>import å…¶å®è¿”å›çš„ä¹Ÿæ˜¯ä¸€ä¸ª promiseï¼Œå› æ­¤ä½¿ç”¨å¦‚ä¸‹ä¸¤ç§æ–¹å¼æ•è·é”™è¯¯</p></blockquote></li></ol> <div class="language- extra-class"><pre class="language-text"><code>// Promise catchæ–¹æ³•
import(/* webpackChunkName: &quot;incentive&quot; */ &quot;./index&quot;)
  .then((module) =&gt; {
    module.default();
  })
  .catch((err) =&gt; {
    console.error(&quot;in catch fn&quot;, err);
  });

// await æ–¹æ³•ï¼Œtry catch
try {
  const module = await import(/* webpackChunkName: &quot;incentive&quot; */ &quot;./index&quot;);
  module.default();
} catch (err) {
  console.error(&quot;in try catch&quot;, err);
}
</code></pre></div><p>å°ç»“ï¼šå…¨å±€æ•è· Promise ä¸­çš„é”™è¯¯</p> <p>ä»¥ä¸Šä¸‰ç§å…¶å®å½’ç»“ä¸º Promise ç±»å‹é”™è¯¯ï¼Œå¯ä»¥é€šè¿‡ unhandledrejection æ•è·</p> <div class="language- extra-class"><pre class="language-text"><code>// å…¨å±€ç»Ÿä¸€å¤„ç†Promise
window.addEventListener(&quot;unhandledrejection&quot;, function (e) {
  console.log(&quot;æ•è·åˆ°å¼‚å¸¸ï¼š&quot;, e);
});
fetch(&quot;https://tuia.cn/test&quot;);
</code></pre></div><p>ä¸ºäº†é˜²æ­¢æœ‰æ¼æ‰çš„ Promise å¼‚å¸¸ï¼Œå¯é€šè¿‡ unhandledrejection ç”¨æ¥å…¨å±€ç›‘å¬ Uncaught Promise Errorã€‚</p> <p><strong>Vue é”™è¯¯</strong></p> <blockquote><p>ç”±äº Vue ä¼šæ•è·æ‰€æœ‰ Vue å•æ–‡ä»¶ç»„ä»¶æˆ–è€… Vue.extend ç»§æ‰¿çš„ä»£ç ï¼Œæ‰€ä»¥åœ¨ Vue é‡Œé¢å‡ºç°çš„é”™è¯¯ï¼Œå¹¶ä¸ä¼šç›´æ¥è¢« window.onerror æ•è·ï¼Œè€Œæ˜¯ä¼šæŠ›ç»™ Vue.config.errorHandlerã€‚</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>/**
 * å…¨å±€æ•è·Vueé”™è¯¯ï¼Œç›´æ¥æ‰”å‡ºç»™onerrorå¤„ç†
 */
Vue.config.errorHandler = function (err) {
  setTimeout(() =&gt; {
    throw err;
  });
};
</code></pre></div><p><strong>React é”™è¯¯</strong></p> <blockquote><p>react é€šè¿‡ componentDidCatchï¼Œå£°æ˜ä¸€ä¸ªé”™è¯¯è¾¹ç•Œçš„ç»„ä»¶</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>class ErrorBoundary extends React.Component {
  constructor(props) {
    super(props);
    this.state = { hasError: false };
  }

  static getDerivedStateFromError(error) {
    // æ›´æ–° state ä½¿ä¸‹ä¸€æ¬¡æ¸²æŸ“èƒ½å¤Ÿæ˜¾ç¤ºé™çº§åçš„ UI
    return { hasError: true };
  }

  componentDidCatch(error, errorInfo) {
    // ä½ åŒæ ·å¯ä»¥å°†é”™è¯¯æ—¥å¿—ä¸ŠæŠ¥ç»™æœåŠ¡å™¨
    logErrorToMyService(error, errorInfo);
  }

  render() {
    if (this.state.hasError) {
      // ä½ å¯ä»¥è‡ªå®šä¹‰é™çº§åçš„ UI å¹¶æ¸²æŸ“
      return &lt;h1&gt;Something went wrong.&lt;/h1&gt;;
    }

    return this.props.children;
  }
}

class App extends React.Component {
  render() {
    return (
      &lt;ErrorBoundary&gt;
        &lt;MyWidget /&gt;
      &lt;/ErrorBoundary&gt;
    );
  }
}
</code></pre></div><p>ä½† error boundaries å¹¶ä¸ä¼šæ•æ‰ä»¥ä¸‹é”™è¯¯ï¼šReact äº‹ä»¶å¤„ç†ï¼Œå¼‚æ­¥ä»£ç ï¼Œerror boundaries è‡ªå·±æŠ›å‡ºçš„é”™è¯¯ã€‚</p> <h3 id="è·¨åŸŸé—®é¢˜"><a href="#è·¨åŸŸé—®é¢˜" class="header-anchor">#</a> è·¨åŸŸé—®é¢˜</h3> <blockquote><p>ä¸€èˆ¬æƒ…å†µï¼Œå¦‚æœå‡ºç° Script error è¿™æ ·çš„é”™è¯¯ï¼ŒåŸºæœ¬ä¸Šå¯ä»¥ç¡®å®šæ˜¯å‡ºç°äº†è·¨åŸŸé—®é¢˜ã€‚</p></blockquote> <p>å¦‚æœå½“å‰æŠ•æ”¾é¡µé¢å’Œäº‘ç«¯ JS æ‰€åœ¨ä¸åŒåŸŸåï¼Œå¦‚æœäº‘ç«¯ JS å‡ºç°é”™è¯¯ï¼Œwindow.onerror ä¼šå‡ºç° Script Errorã€‚é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹æ³•èƒ½ç»™äºˆè§£å†³ã€‚</p> <ul><li>åç«¯é…ç½® Access-Control-Allow-Originã€å‰ç«¯ script åŠ  crossoriginã€‚</li></ul> <div class="language- extra-class"><pre class="language-text"><code>&lt;script src=&quot;http://yun.tuia.cn/test.js&quot; crossorigin&gt;&lt;/script&gt;;

const script = document.createElement(&quot;script&quot;);
script.crossOrigin = &quot;anonymous&quot;;
script.src = &quot;http://yun.tuia.cn/test.js&quot;;
document.body.appendChild(script);
</code></pre></div><ul><li>å¦‚æœä¸èƒ½ä¿®æ”¹æœåŠ¡ç«¯çš„è¯·æ±‚å¤´ï¼Œå¯ä»¥è€ƒè™‘é€šè¿‡ä½¿ç”¨ try/catch ç»•è¿‡ï¼Œå°†é”™è¯¯æŠ›å‡ºã€‚</li></ul> <div class="language- extra-class"><pre class="language-text"><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Test page in http://test.com&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;script src=&quot;https://yun.dui88.com/tuia/cdn/remote/testerror.js&quot;&gt;&lt;/script&gt;
    &lt;script&gt;
      window.onerror = function (message, url, line, column, error) {
        console.log(message, url, line, column, error);
      };

      try {
        foo(); // è°ƒç”¨testerror.jsä¸­å®šä¹‰çš„fooæ–¹æ³•
      } catch (e) {
        throw e;
      }
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre></div><p>ä¼šå‘ç°å¦‚æœä¸åŠ  try catchï¼Œconsole.log å°±ä¼šæ‰“å° script errorã€‚åŠ ä¸Š try catch å°±èƒ½æ•è·åˆ°ã€‚</p> <p>æˆ‘ä»¬æ‹ä¸€ä¸‹åœºæ™¯ï¼Œä¸€èˆ¬è°ƒç”¨è¿œç«¯ jsï¼Œæœ‰ä¸‹åˆ—ä¸‰ç§å¸¸è§æƒ…å†µã€‚</p> <ul><li>è°ƒç”¨è¿œç«¯ JS çš„æ–¹æ³•å‡ºé”™</li> <li>è¿œç«¯ JS å†…éƒ¨çš„äº‹ä»¶å‡ºé—®é¢˜</li> <li>è¦ä¹ˆåœ¨ setTimeout ç­‰å›è°ƒå†…å‡ºé”™</li></ul> <p><strong>è°ƒç”¨æ–¹æ³•åœºæ™¯</strong></p> <p>å¯ä»¥é€šè¿‡å°è£…ä¸€ä¸ªå‡½æ•°ï¼Œèƒ½è£…é¥°åŸæ–¹æ³•ï¼Œä½¿å¾—å…¶èƒ½è¢« try/catchã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Test page in http://test.com&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;script src=&quot;https://yun.dui88.com/tuia/cdn/remote/testerror.js&quot;&gt;&lt;/script&gt;
    &lt;script&gt;
      window.onerror = function (message, url, line, column, error) {
        console.log(message, url, line, column, error);
      };

      function wrapErrors(fn) {
        // don't wrap function more than once
        if (!fn.__wrapped__) {
          fn.__wrapped__ = function () {
            try {
              return fn.apply(this, arguments);
            } catch (e) {
              throw e; // re-throw the error
            }
          };
        }

        return fn.__wrapped__;
      }

      wrapErrors(foo)();
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre></div><p>å¤§å®¶å¯ä»¥å°è¯•å»æ‰ wrapErrors æ„Ÿå—ä¸‹ã€‚</p> <p><strong>äº‹ä»¶åœºæ™¯</strong></p> <p>å¯ä»¥åŠ«æŒåŸç”Ÿæ–¹æ³•ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Test page in http://test.com&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;script&gt;
      const originAddEventListener = EventTarget.prototype.addEventListener;
      EventTarget.prototype.addEventListener = function (
        type,
        listener,
        options
      ) {
        const wrappedListener = function (...args) {
          try {
            return listener.apply(this, args);
          } catch (err) {
            throw err;
          }
        };
        return originAddEventListener.call(
          this,
          type,
          wrappedListener,
          options
        );
      };
    &lt;/script&gt;
    &lt;div style=&quot;height: 9999px;&quot;&gt;http://test.com&lt;/div&gt;
    &lt;script src=&quot;https://yun.dui88.com/tuia/cdn/remote/error_scroll.js&quot;&gt;&lt;/script&gt;
    &lt;script&gt;
      window.onerror = function (message, url, line, column, error) {
        console.log(message, url, line, column, error);
      };
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre></div><p>å¤§å®¶å¯ä»¥å°è¯•å»æ‰å°è£… EventTarget.prototype.addEventListener çš„é‚£æ®µä»£ç ï¼Œæ„Ÿå—ä¸‹ã€‚</p> <h3 id="ä¸ŠæŠ¥æ¥å£"><a href="#ä¸ŠæŠ¥æ¥å£" class="header-anchor">#</a> ä¸ŠæŠ¥æ¥å£</h3> <p>ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥ç”¨ GET/POST/HEAD è¯·æ±‚æ¥å£è¿›è¡Œä¸ŠæŠ¥ï¼Ÿ</p> <p>è¿™ä¸ªæ¯”è¾ƒå®¹æ˜“æƒ³åˆ°åŸå› ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œæ‰“ç‚¹åŸŸåéƒ½ä¸æ˜¯å½“å‰åŸŸåï¼Œæ‰€ä»¥æ‰€æœ‰çš„æ¥å£è¯·æ±‚éƒ½ä¼šæ„æˆè·¨åŸŸã€‚</p> <p>ä¸ºä»€ä¹ˆä¸èƒ½ç”¨è¯·æ±‚å…¶ä»–çš„æ–‡ä»¶èµ„æºï¼ˆjs/css/ttfï¼‰çš„æ–¹å¼è¿›è¡Œä¸ŠæŠ¥ï¼Ÿ</p> <p>åˆ›å»ºèµ„æºèŠ‚ç‚¹ååªæœ‰å°†å¯¹è±¡æ³¨å…¥åˆ°æµè§ˆå™¨ DOM æ ‘åï¼Œæµè§ˆå™¨æ‰ä¼šå®é™…å‘é€èµ„æºè¯·æ±‚ã€‚è€Œä¸”è½½å…¥ js/css èµ„æºè¿˜ä¼šé˜»å¡é¡µé¢æ¸²æŸ“ï¼Œå½±å“ç”¨æˆ·ä½“éªŒã€‚</p> <p>æ„é€ å›¾ç‰‡æ‰“ç‚¹ä¸ä»…ä¸ç”¨æ’å…¥ DOMï¼Œåªè¦åœ¨ js ä¸­ new å‡º Image å¯¹è±¡å°±èƒ½å‘èµ·è¯·æ±‚ï¼Œè€Œä¸”è¿˜æ²¡æœ‰é˜»å¡é—®é¢˜ï¼Œåœ¨æ²¡æœ‰ js çš„æµè§ˆå™¨ç¯å¢ƒä¸­ä¹Ÿèƒ½é€šè¿‡ img æ ‡ç­¾æ­£å¸¸æ‰“ç‚¹ã€‚</p> <p>ä½¿ç”¨ new Image è¿›è¡Œæ¥å£ä¸ŠæŠ¥ã€‚æœ€åä¸€ä¸ªé—®é¢˜ï¼ŒåŒæ ·éƒ½æ˜¯å›¾ç‰‡ï¼Œä¸ŠæŠ¥æ—¶é€‰ç”¨äº† 1x1 çš„é€æ˜ GIFï¼Œè€Œä¸æ˜¯å…¶ä»–çš„ PNG/JEPG/BMP æ–‡ä»¶ã€‚</p> <p>é¦–å…ˆï¼Œ1x1 åƒç´ æ˜¯æœ€å°çš„åˆæ³•å›¾ç‰‡ã€‚è€Œä¸”ï¼Œå› ä¸ºæ˜¯é€šè¿‡å›¾ç‰‡æ‰“ç‚¹ï¼Œæ‰€ä»¥å›¾ç‰‡æœ€å¥½æ˜¯é€æ˜çš„ï¼Œè¿™æ ·ä¸€æ¥ä¸ä¼šå½±å“é¡µé¢æœ¬èº«å±•ç¤ºæ•ˆæœï¼ŒäºŒè€…è¡¨ç¤ºå›¾ç‰‡é€æ˜åªè¦ä½¿ç”¨ä¸€ä¸ªäºŒè¿›åˆ¶ä½æ ‡è®°å›¾ç‰‡æ˜¯é€æ˜è‰²å³å¯ï¼Œä¸ç”¨å­˜å‚¨è‰²å½©ç©ºé—´æ•°æ®ï¼Œå¯ä»¥èŠ‚çº¦ä½“ç§¯ã€‚å› ä¸ºéœ€è¦é€æ˜è‰²ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥æ’é™¤ JEPGã€‚</p> <p>åŒæ ·çš„å“åº”ï¼ŒGIF å¯ä»¥æ¯” BMP èŠ‚çº¦ 41%çš„æµé‡ï¼Œæ¯” PNG èŠ‚çº¦ 35%çš„æµé‡ã€‚GIF æ‰æ˜¯æœ€ä½³é€‰æ‹©ã€‚</p> <ul><li>å¯ä»¥è¿›è¡Œè·¨åŸŸ</li> <li>ä¸ä¼šæºå¸¦ cookie</li> <li>ä¸éœ€è¦ç­‰å¾…æœåŠ¡å™¨è¿”å›æ•°æ®</li></ul> <blockquote><p>ä½¿ç”¨ 1*1 çš„ gif[1]</p></blockquote> <h3 id="éé˜»å¡åŠ è½½"><a href="#éé˜»å¡åŠ è½½" class="header-anchor">#</a> éé˜»å¡åŠ è½½</h3> <p>å°½é‡é¿å… SDK çš„ js èµ„æºåŠ è½½å½±å“ã€‚</p> <p>é€šè¿‡å…ˆæŠŠ window.onerror çš„é”™è¯¯è®°å½•è¿›è¡Œç¼“å­˜ï¼Œç„¶åå¼‚æ­¥è¿›è¡Œ SDK çš„åŠ è½½ï¼Œå†åœ¨ SDK é‡Œé¢å¤„ç†é”™è¯¯ä¸ŠæŠ¥ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;script&gt;
        (function(w) {
            w._error_storage_ = [];
            function errorhandler(){
                // ç”¨äºè®°å½•å½“å‰çš„é”™è¯¯
                w._error_storage_&amp;&amp;w._error_storage_.push([].slice.call(arguments));
            }
            w.addEventListener &amp;&amp; w.addEventListener(&quot;error&quot;, errorhandler, true);
            var times = 3,
            appendScript = function appendScript() {
                var sc = document.createElement(&quot;script&quot;);
                sc.async = !0,
                sc.src = './build/skyeye.js',  // å–å†³äºä½ å­˜æ”¾çš„ä½ç½®
                sc.crossOrigin = &quot;anonymous&quot;,
                sc.onerror = function() {
                    times--,
                    times &gt; 0 &amp;&amp; setTimeout(appendScript, 1500)
                },
                document.head &amp;&amp; document.head.appendChild(sc);
            };
            setTimeout(appendScript, 1500);
        })(window);
    &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•é¡µé¢(new)&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre></div><h2 id="é‡‡é›†èšåˆç«¯-æ—¥å¿—æœåŠ¡å™¨"><a href="#é‡‡é›†èšåˆç«¯-æ—¥å¿—æœåŠ¡å™¨" class="header-anchor">#</a> é‡‡é›†èšåˆç«¯ï¼ˆæ—¥å¿—æœåŠ¡å™¨ï¼‰</h2> <blockquote><p>è¿™ä¸ªç¯èŠ‚ï¼Œè¾“å…¥æ˜¯å€Ÿå£æ¥æ”¶åˆ°çš„é”™è¯¯è®°å½•ï¼Œè¾“å‡ºæ˜¯æœ‰æ•ˆçš„æ•°æ®å…¥åº“ã€‚æ ¸å¿ƒåŠŸèƒ½éœ€è¦å¯¹æ•°æ®è¿›è¡Œæ¸…æ´—ï¼Œé¡ºå¸¦è§£å†³äº†è¿‡å¤šçš„æœåŠ¡å‹åŠ›ã€‚å¦ä¸€ä¸ªæ ¸å¿ƒåŠŸèƒ½æ˜¯å¯¹æ•°æ®è¿›è¡Œå…¥åº“ã€‚</p></blockquote> <p>æ€»ä½“æµç¨‹å¯ä»¥çœ‹ä¸ºé”™è¯¯æ ‡è¯† -&gt; é”™è¯¯è¿‡æ»¤ -&gt; é”™è¯¯æ¥æ”¶ -&gt; é”™è¯¯å­˜å‚¨ã€‚</p> <h3 id="é”™è¯¯æ ‡è¯†-sdk-é…åˆ"><a href="#é”™è¯¯æ ‡è¯†-sdk-é…åˆ" class="header-anchor">#</a> é”™è¯¯æ ‡è¯†ï¼ˆSDK é…åˆï¼‰</h3> <p>èšåˆä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦æœ‰ä¸åŒç»´åº¦æ ‡è¯†é”™è¯¯çš„èƒ½åŠ›ï¼Œå¯ä»¥ç†è§£ä¸ºå®šä½å•ä¸ªé”™è¯¯æ¡ç›®ï¼Œå•ä¸ªé”™è¯¯äº‹ä»¶çš„èƒ½åŠ›ã€‚</p> <p>**å•ä¸ªé”™è¯¯æ¡ç›® **</p> <p>é€šè¿‡ date å’Œéšæœºå€¼ç”Ÿæˆä¸€æ¡å¯¹åº”çš„é”™è¯¯æ¡ç›® idã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>const errorKey = `${+new Date()}@${randomString(8)}`;

function randomString(len) {
  len = len || 32;
  let chars = &quot;ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678&quot;;
  let maxPos = chars.length;
  let pwd = &quot;&quot;;
  for (let i = 0; i &lt; len; i++) {
    pwd += chars.charAt(Math.floor(Math.random() * maxPos));
  }
  return pwd;
}
</code></pre></div><p><strong>å•ä¸ªé”™è¯¯äº‹ä»¶</strong></p> <p>é¦–å…ˆéœ€è¦æœ‰å®šä½åŒä¸ªé”™è¯¯äº‹ä»¶ï¼ˆä¸åŒç”¨æˆ·ï¼Œå‘ç”Ÿç›¸åŒé”™è¯¯ç±»å‹ã€é”™è¯¯ä¿¡æ¯ï¼‰çš„èƒ½åŠ›ã€‚</p> <p>é€šè¿‡ messageã€colno ä¸ lineno è¿›è¡Œç›¸åŠ è®¡ç®—é˜¿æ–¯å…‹ç å€¼ï¼Œå¯ä»¥ç”Ÿæˆé”™è¯¯çš„ errorKeyã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>const eventKey = compressString(
  String(e.message),
  String(e.colno) + String(e.lineno)
);

function compressString(str, key) {
  let chars = &quot;ABCDEFGHJKMNPQRSTWXYZ&quot;;
  if (!str || !key) {
    return &quot;null&quot;;
  }
  let n = 0,
    m = 0;
  for (let i = 0; i &lt; str.length; i++) {
    n += str[i].charCodeAt();
  }
  for (let j = 0; j &lt; key.length; j++) {
    m += key[j].charCodeAt();
  }
  let num =
    n +
    &quot;&quot; +
    key[key.length - 1].charCodeAt() +
    m +
    str[str.length - 1].charCodeAt();
  if (num) {
    num = num + chars[num[num.length - 1]];
  }
  return num;
}
</code></pre></div><p>å¦‚ä¸‹å›¾ï¼Œä¸€ä¸ªé”™è¯¯äº‹ä»¶ï¼ˆäº‹ä»¶åˆ—è¡¨ï¼‰ï¼Œä¸‹å±æ¯æ¡å³ä¸ºå®é™…çš„é”™è¯¯æ¡ç›®ã€‚<img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡"></p> <h3 id="é”™è¯¯è¿‡æ»¤-sdk-é…åˆ"><a href="#é”™è¯¯è¿‡æ»¤-sdk-é…åˆ" class="header-anchor">#</a> é”™è¯¯è¿‡æ»¤ï¼ˆSDK é…åˆï¼‰</h3> <p><strong>åŸŸåè¿‡æ»¤</strong></p> <p>è¿‡æ»¤æœ¬é¡µé¢ script errorï¼Œå¯èƒ½è¢« webview æ’å…¥å…¶ä»– jsã€‚</p> <p>æˆ‘ä»¬åªå…³å¿ƒè‡ªå·±çš„è¿œç«¯ JS é—®é¢˜ï¼Œå› æ­¤åšäº†æ ¹æ®æœ¬å…¬å¸åŸŸåè¿›è¡Œè¿‡æ»¤ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>// ä¼ªä»£ç 
if (!e.filename || !e.filename.match(/^(http|https):\/\/yun./)) return true;
</code></pre></div><p><strong>é‡å¤ä¸ŠæŠ¥</strong></p> <p>æ€ä¹ˆé¿å…é‡å¤çš„æ•°æ®ä¸ŠæŠ¥ï¼Ÿæ ¹æ® errorKey æ¥è¿›è¡Œç¼“å­˜ï¼Œé‡å¤çš„é”™è¯¯é¿å…ä¸ŠæŠ¥çš„æ¬¡æ•°è¶…è¿‡é˜ˆå€¼ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>// ä¼ªä»£ç 

const localStorage = window.localStorage;
const TIMES = 6; // ç¼“å­˜æ¡æ•°

export function setItem(key, repeat) {
  if (!key) {
    key = &quot;unknow&quot;;
  }

  if (has(key)) {
    const value = getItem(key);

    // æ ¸å¿ƒä»£ç ï¼Œè¶…è¿‡æ¡æ•°ï¼Œè·³å‡º
    if (value &gt;= repeat) {
      return true;
    }
    storeStorage[key] = {
      value: value + 1,
      time: Date.now(),
    };
  } else {
    storeStorage[key] = {
      value: 1,
      time: Date.now(),
    };
  }
  return false;
}
</code></pre></div><h3 id="é”™è¯¯æ¥æ”¶"><a href="#é”™è¯¯æ¥æ”¶" class="header-anchor">#</a> é”™è¯¯æ¥æ”¶</h3> <p>åœ¨å¤„ç†æ¥æ”¶æ¥å£çš„æ—¶å€™ï¼Œæ³¨æ„æµé‡çš„æ§åˆ¶ï¼Œè¿™ä¹Ÿæ˜¯åç«¯å¼€å‘éœ€è¦æŠ•å…¥æœ€å¤šç²¾åŠ›çš„åœ°æ–¹ï¼Œå¤„ç†é«˜å¹¶å‘çš„æµé‡ã€‚</p> <p><strong>é”™è¯¯è®°å½•</strong></p> <p>æ¥æ”¶ç«¯ä½¿ç”¨ Koaï¼Œç®€å•çš„å®ç°äº†æ¥æ”¶åŠæ‰“å°åˆ°ç£ç›˜ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>// ä¼ªä»£ç 

module.exports = async ctx =&gt; {
  const { query } = ctx.request;

  // å¯¹äºå­—æ®µè¿›è¡Œç®€å•check
  check([ 'mobile', 'network', 'ip', 'system', 'ua', ......], query);

  ctx.type = 'application/json';
  ctx.body = { code: '1', msg: 'æ•°æ®ä¸ŠæŠ¥æˆåŠŸ' };

  // è¿›è¡Œæ—¥å¿—è®°å½•åˆ°ç£ç›˜çš„ä»£ç ï¼Œæ ¹æ®è‡ªå·±çš„æ—¥å¿—åº“é€‰æ‹©
};
</code></pre></div><p><strong>å‰Šå³°æœºåˆ¶</strong></p> <p>æ¯”å¦‚æ¯ç§’è®¾ç½® 2000 çš„é˜ˆå€¼ï¼Œç„¶åæ ¹æ®è¯·æ±‚é‡å‡å°‘ä¸Šé™ï¼Œå®šæ—¶é‡ç½®ä¸Šé™ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>// ä¼ªä»£ç 

// 1000ms
const TICK = 1000;
// 1ç§’ä¸Šé™ä¸º2000
const MAX_LIMIT = 2000;
// æ¯å°æœåŠ¡å™¨è¯·æ±‚ä¸Šé™å€¼
let maxLimit = MAX_LIMIT;

/**
 * å¯åŠ¨é‡ç½®å‡½æ•°
 */
const task = () =&gt; {
  setTimeout(() =&gt; {
    maxLimit = MAX_LIMIT;
    task();
  }, TICK);
};
task();

const check = () =&gt; {
  if (maxLimit &lt;= 0) {
    throw new Error(&quot;è¶…è¿‡ä¸ŠæŠ¥æ¬¡æ•°&quot;);
  }
  maxLimit--;
  // æ‰§è¡Œä¸šåŠ¡ä»£ç ã€‚ã€‚ã€‚
};
</code></pre></div><p><strong>é‡‡æ ·å¤„ç†</strong></p> <p>è¶…è¿‡é˜ˆå€¼ï¼Œè¿˜å¯ä»¥è¿›è¡Œé‡‡æ ·æ”¶é›†ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>// åªé‡‡é›† 20%
if (Math.random() &lt; 0.2) {
  collect(data); // è®°å½•é”™è¯¯ä¿¡æ¯
}
</code></pre></div><h3 id="é”™è¯¯å­˜å‚¨"><a href="#é”™è¯¯å­˜å‚¨" class="header-anchor">#</a> é”™è¯¯å­˜å‚¨</h3> <p>å¯¹äºæ‰“å°åœ¨äº†ç£ç›˜çš„æ—¥å¿—ï¼Œæˆ‘ä»¬æ€ä¹ˆæ ·æ‰èƒ½å¯¹äºå…¶è¿›è¡Œèšåˆå‘¢ï¼Œè¿™é‡Œå¾—è€ƒè™‘ä½¿ç”¨å­˜å‚¨æ–¹æ¡ˆã€‚</p> <p>ä¸€èˆ¬é€‰æ‹©äº†å­˜å‚¨æ–¹æ¡ˆåï¼Œè®¾ç½®å¥½é…ç½®ï¼Œå­˜å‚¨æ–¹æ¡ˆå°±å¯ä»¥é€šè¿‡ç£ç›˜å®šæ—¶å‘¨æœŸæ€§çš„è·å–æ•°æ®ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦é€‰æ‹©ä¸€æ¬¾å­˜å‚¨æ–¹æ¡ˆã€‚</p> <p>å¯¹äºå­˜å‚¨æ–¹æ¡ˆï¼Œæˆ‘ä»¬å¯¹æ¯”äº†æ—¥å¸¸å¸¸è§æ–¹æ¡ˆï¼Œé˜¿é‡Œäº‘æ—¥å¿—æœåŠ¡ - Log Serviceï¼ˆSLSï¼‰ã€ELKï¼ˆElasticã€Logstashã€Kibanaï¼‰ã€Hadoop/Hiveï¼ˆå°†æ•°æ®å­˜å‚¨åœ¨ Hadoopï¼Œåˆ©ç”¨ Hive è¿›è¡ŒæŸ¥è¯¢ï¼‰ ç±»æ–¹æ¡ˆçš„å¯¹æ¯”ã€‚</p> <p>ä»ä»¥ä¸‹æ–¹é¢è¿›è¡Œäº†å¯¹æ¯”ï¼Œæœ€ç»ˆé€‰æ‹©äº† Log Serviceï¼Œä¸»è¦è€ƒè™‘ä¸ºæ— éœ€æ­å»ºï¼Œæˆæœ¬ä½ï¼ŒæŸ¥è¯¢åŠŸèƒ½æ»¡è¶³ã€‚</p> <table><thead><tr><th style="text-align:left;">åŠŸèƒ½é¡¹</th> <th style="text-align:left;">ELK ç±»ç³»ç»Ÿ</th> <th style="text-align:left;">Hadoop + Hive</th> <th style="text-align:left;">æ—¥å¿—æœåŠ¡</th></tr></thead> <tbody><tr><td style="text-align:left;">æ—¥å¿—å»¶æ—¶</td> <td style="text-align:left;">1~60 ç§’</td> <td style="text-align:left;">å‡ åˆ†é’Ÿ~æ•°å°æ—¶</td> <td style="text-align:left;">å®æ—¶</td></tr> <tr><td style="text-align:left;">æŸ¥è¯¢å»¶æ—¶</td> <td style="text-align:left;">å°äº 1 ç§’</td> <td style="text-align:left;">åˆ†é’Ÿçº§</td> <td style="text-align:left;">å°äº 1 ç§’</td></tr> <tr><td style="text-align:left;">æŸ¥è¯¢èƒ½åŠ›</td> <td style="text-align:left;">å¥½</td> <td style="text-align:left;">å¥½</td> <td style="text-align:left;">å¥½</td></tr> <tr><td style="text-align:left;">æ‰©å±•æ€§</td> <td style="text-align:left;">æå‰é¢„å¤‡æœºå™¨</td> <td style="text-align:left;">æå‰é¢„å¤‡æœºå™¨</td> <td style="text-align:left;">ç§’çº§ 10 å€æ‰©å®¹</td></tr> <tr><td style="text-align:left;">æˆæœ¬</td> <td style="text-align:left;">è¾ƒé«˜</td> <td style="text-align:left;">è¾ƒä½</td> <td style="text-align:left;">å¾ˆä½</td></tr></tbody></table> <blockquote><p>æ—¥å¿—å»¶æ—¶ï¼šæ—¥å¿—äº§ç”Ÿåï¼Œå¤šä¹…å¯æŸ¥è¯¢ã€‚æŸ¥è¯¢å»¶æ—¶ï¼šå•ä½æ—¶é—´æ‰«ææ•°æ®é‡ã€‚æŸ¥è¯¢èƒ½åŠ›ï¼šå…³é”®è¯æŸ¥è¯¢ã€æ¡ä»¶ç»„åˆæŸ¥è¯¢ã€æ¨¡ç³ŠæŸ¥è¯¢ã€æ•°å€¼æ¯”è¾ƒã€ä¸Šä¸‹æ–‡æŸ¥è¯¢ã€‚æ‰©å±•æ€§ï¼šå¿«é€Ÿåº”å¯¹ç™¾å€æµé‡ä¸Šæ¶¨ã€‚æˆæœ¬ï¼šæ¯ GB è´¹ç”¨ã€‚</p></blockquote> <p>å…·ä½“ API ä½¿ç”¨ï¼Œå¯æŸ¥çœ‹æ—¥å¿—æœåŠ¡[2]ã€‚</p> <h2 id="å¯è§†åˆ†æç«¯-å¯è§†åŒ–å¹³å°"><a href="#å¯è§†åˆ†æç«¯-å¯è§†åŒ–å¹³å°" class="header-anchor">#</a> å¯è§†åˆ†æç«¯ï¼ˆå¯è§†åŒ–å¹³å°ï¼‰</h2> <blockquote><p>è¿™ä¸ªç¯èŠ‚ï¼Œè¾“å…¥æ˜¯å€Ÿå£æ¥æ”¶åˆ°çš„é”™è¯¯è®°å½•ï¼Œè¾“å‡ºæ˜¯æœ‰æ•ˆçš„æ•°æ®å…¥åº“ã€‚æ ¸å¿ƒåŠŸèƒ½éœ€è¦å¯¹æ•°æ®è¿›è¡Œæ¸…æ´—ï¼Œé¡ºå¸¦è§£å†³äº†è¿‡å¤šçš„æœåŠ¡å‹åŠ›ã€‚å¦ä¸€ä¸ªæ ¸å¿ƒåŠŸèƒ½æ˜¯å¯¹æ•°æ®è¿›è¡Œå…¥åº“ã€‚</p></blockquote> <h3 id="ä¸»åŠŸèƒ½"><a href="#ä¸»åŠŸèƒ½" class="header-anchor">#</a> ä¸»åŠŸèƒ½</h3> <blockquote><p>è¿™éƒ¨åˆ†ä¸»è¦æ˜¯äº§å“åŠŸèƒ½çš„åˆç†è®¾è®¡ï¼Œåšåˆ°å°è€Œç¾ï¼Œå…·ä½“çš„æ€ä¹ˆèšåˆï¼Œå‚è€ƒé˜¿é‡Œäº‘ SLS å°±å¯ä»¥ã€‚</p></blockquote> <ol><li>é¦–é¡µå›¾è¡¨ï¼Œå¯é€‰ 1 å¤©ã€4 å°æ—¶ã€1 å°æ—¶ç­‰ç­‰ï¼Œèšåˆé”™è¯¯æ•°ï¼Œæ ¹æ® 1 å¤©åˆ‡åˆ† 24 ä»½æ¥èšåˆã€‚</li> <li>é¦–é¡µåˆ—è¡¨ï¼Œèšåˆé€‰ä¸­æ—¶é—´å†…çš„æ•°æ®ï¼Œå±•ç¤ºé”™è¯¯æ–‡ä»¶ã€é”™è¯¯ keyã€äº‹ä»¶æ•°ã€é”™è¯¯ç±»å‹ã€æ—¶é—´ã€é”™è¯¯ä¿¡æ¯ã€‚</li> <li>é”™è¯¯è¯¦æƒ…ï¼Œäº‹ä»¶åˆ—è¡¨ã€åŸºæœ¬ä¿¡æ¯ã€è®¾å¤‡ä¿¡æ¯ã€è®¾å¤‡å æ¯”å›¾è¡¨ï¼ˆè§ä¸Šé¢äº‹ä»¶åˆ—è¡¨çš„å›¾ï¼‰ã€‚</li></ol> <p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡">image.png</p> <h3 id="æ’è¡Œæ¦œ"><a href="#æ’è¡Œæ¦œ" class="header-anchor">#</a> æ’è¡Œæ¦œ</h3> <p>åˆšå¼€å§‹åšäº†å¾…å¤„ç†é”™è¯¯åˆ—è¡¨ã€æˆ‘çš„é”™è¯¯åˆ—è¡¨ã€å·²è§£å†³åˆ—è¡¨ï¼Œé”™è¯¯ä¸äººæ²¡æœ‰ç»‘å®šå…³ç³»ï¼Œè¿‡äºä¾èµ–äººä¸ºä¸»åŠ¨ï¼Œéœ€è¦æ¯ä¸ªäººä¸»åŠ¨åˆ°å¹³å°ä¸Šå¤„ç†ï¼Œæ•ˆæœä¸ä½³ã€‚</p> <p>åé¢é€šè¿‡é”™è¯¯ä½œè€…æ’è¡Œæ¦œï¼Œé€šè¿‡é’‰é’‰æ—¥æŠ¥æ¥æé†’å¯¹åº”äººå‘˜å¤„ç†ã€‚ç´§æ€¥é”™è¯¯ï¼Œé€šè¿‡å®æ—¶å‘Šè­¦æ¥è´£ä»»åˆ°äººï¼Œåé¢å‘Šè­¦ä¼šè¯´ã€‚</p> <p>å…·ä½“åŸç†ï¼š</p> <ul><li>webpack æ‰“åŒ…é€šè¿‡ git å‘½ä»¤æŠŠä½œè€…å’Œä½œè€…é‚®ç®±ã€æ—¶é—´æ‰“åŒ…åœ¨å¤´éƒ¨ã€‚</li> <li>åœ¨å¯è§†åŒ–æœåŠ¡ä¸­ï¼Œå»è¯·æ±‚å¯¹åº”çš„æŠ¥é”™ url åŒ¹é…åˆ°å¯¹åº”ä½œè€…ï¼Œè¿”å›ç»™å±•ç¤ºç«¯ã€‚</li></ul> <p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡">image.png</p> <h3 id="sourcemap"><a href="#sourcemap" class="header-anchor">#</a> SourceMap</h3> <p>åˆ©ç”¨ webpack çš„ hidden-source-map æ„å»ºã€‚ä¸ source-map ç›¸æ¯”å°‘äº†æœ«å°¾çš„æ³¨é‡Šï¼Œä½† output ç›®å½•ä¸‹çš„ index.js.map æ²¡æœ‰å°‘ã€‚çº¿ä¸Šç¯å¢ƒé¿å… source-map æ³„éœ²ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>webpackJsonp([1],[
  function(e,t,i){...},
  function(e,t,i){...},
  function(e,t,i){...},
  function(e,t,i){...},
  ...
])
// è¿™é‡Œæ²¡æœ‰ç”Ÿæˆsource-mapçš„é“¾æ¥åœ°å€
</code></pre></div><p>æ ¹æ®æŠ¥é”™æ–‡ä»¶çš„ urlï¼Œæ ¹æ®å›¢é˜Ÿå†…éƒ¨çº¦å®šå¥½çš„ç›®å½•å’Œè§„åˆ™ï¼Œå®šä½ä¹‹å‰æ‰“åŒ…ä¸Šä¼ çš„ sourceMap åœ°å€ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>const sourcemapUrl = &quot;xxxfolder/&quot; + url + &quot;xxxHash&quot; + &quot;.map&quot;;
</code></pre></div><p>è·å–ä¸ŠæŠ¥çš„ lineã€columnã€sourceï¼Œåˆ©ç”¨ç¬¬ä¸‰æ–¹åº“ sourceMap è¿›è¡Œå®šä½ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>const sourceMap = require(&quot;source-map&quot;);

// æ ¹æ®è¡Œæ•°è·å–æºæ–‡ä»¶è¡Œæ•°
const getPosition = async (map, rolno, colno) =&gt; {
  const consumer = await new sourceMap.SourceMapConsumer(map);

  const position = consumer.originalPositionFor({
    line: rolno,
    column: colno,
  });

  position.content = consumer.sourceContentFor(position.source);

  return position;
};
</code></pre></div><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡">æ„Ÿå…´è¶£ SourceMap åŸç†çš„ï¼Œå¯ä»¥ç»§ç»­æ·±å…¥ï¼Œ<a href="https://mp.weixin.qq.com/s?__biz=MzkxNDIzNTg4MA==&amp;mid=2247484211&amp;idx=1&amp;sn=1fe17b3d2f8d74267bb20c61fcf8204d&amp;scene=21#wechat_redirect" target="_blank" rel="noopener noreferrer">SourceMap ä¸å‰ç«¯å¼‚å¸¸ç›‘æ§<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚</p> <h2 id="é”™è¯¯æŠ¥è­¦"><a href="#é”™è¯¯æŠ¥è­¦" class="header-anchor">#</a> é”™è¯¯æŠ¥è­¦</h2> <h3 id="æŠ¥è­¦è®¾ç½®"><a href="#æŠ¥è­¦è®¾ç½®" class="header-anchor">#</a> æŠ¥è­¦è®¾ç½®</h3> <ol><li>æ¯æ¡ä¸šåŠ¡çº¿è®¾ç½®è‡ªå·±çš„é˜ˆå€¼ã€é”™è¯¯æ—¶é—´è·¨åº¦ï¼ŒæŠ¥è­¦è½®è¯¢é—´éš”</li> <li>é€šè¿‡é’‰é’‰ hook æŠ¥è­¦åˆ°å¯¹åº”çš„ç¾¤</li> <li>é€šè¿‡æ—¥æŠ¥å½¢å¼æŠ¥å‡ºé”™è¯¯ä½œè€…æ’è¡Œæ¦œ</li></ol> <p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡">image.png</p> <h1 id="â—‹-å››ã€æ‰©å±•"><a href="#â—‹-å››ã€æ‰©å±•" class="header-anchor">#</a> â—‹ å››ã€æ‰©å±•</h1> <h2 id="è¡Œä¸ºæœé›†"><a href="#è¡Œä¸ºæœé›†" class="header-anchor">#</a> è¡Œä¸ºæœé›†</h2> <p>é€šè¿‡æœé›†ç”¨æˆ·çš„æ“ä½œï¼Œå¯ä»¥æ˜æ˜¾å‘ç°é”™è¯¯ä¸ºä»€ä¹ˆäº§ç”Ÿã€‚<img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡"></p> <h3 id="åˆ†ç±»"><a href="#åˆ†ç±»" class="header-anchor">#</a> åˆ†ç±»</h3> <ul><li>UI è¡Œä¸ºï¼šç‚¹å‡»ã€æ»šåŠ¨ã€èšç„¦/å¤±ç„¦ã€é•¿æŒ‰</li> <li>æµè§ˆå™¨è¡Œä¸ºï¼šè¯·æ±‚ã€å‰è¿›/åé€€ã€è·³è½¬ã€æ–°å¼€é¡µé¢ã€å…³é—­</li> <li>æ§åˆ¶å°è¡Œä¸ºï¼šlogã€warnã€error</li></ul> <h3 id="æœé›†æ–¹å¼"><a href="#æœé›†æ–¹å¼" class="header-anchor">#</a> æœé›†æ–¹å¼</h3> <ol><li>ç‚¹å‡»è¡Œä¸º</li></ol> <p>ä½¿ç”¨ addEventListener ç›‘å¬å…¨å±€ä¸Šçš„ click äº‹ä»¶ï¼Œå°†äº‹ä»¶å’Œ DOM å…ƒç´ åå­—æ”¶é›†ã€‚ä¸é”™è¯¯ä¿¡æ¯ä¸€èµ·ä¸ŠæŠ¥ã€‚</p> <ol><li>å‘é€è¯·æ±‚</li></ol> <p>ç›‘å¬ XMLHttpRequest çš„ onreadystatechange å›è°ƒå‡½æ•°</p> <ol><li>é¡µé¢è·³è½¬</li></ol> <p>ç›‘å¬ window.onpopstateï¼Œé¡µé¢è¿›è¡Œè·³è½¬æ—¶ä¼šè§¦å‘ã€‚</p> <ol><li>æ§åˆ¶å°è¡Œä¸º</li></ol> <p>é‡å†™ console å¯¹è±¡çš„ info ç­‰æ–¹æ³•ã€‚</p> <p>æœ‰å…´è¶£å¯ä»¥å‚è€ƒè¡Œä¸ºç›‘æ§[3]ã€‚</p> <h2 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="header-anchor">#</a> é‡åˆ°çš„é—®é¢˜</h2> <blockquote><p>ç”±äºæ¶‰åŠåˆ°ä¸€äº›éšç§ï¼Œä¸‹è¿°ä¼šåšè„±æ•å¤„ç†ã€‚</p></blockquote> <h3 id="ç©ºæ—¥å¿—é—®é¢˜"><a href="#ç©ºæ—¥å¿—é—®é¢˜" class="header-anchor">#</a> ç©ºæ—¥å¿—é—®é¢˜</h3> <p>ä¸Šçº¿ç°åº¦è¿è¡Œåï¼Œæˆ‘ä»¬å‘ç° SLS æ—¥å¿—å­˜åœ¨ä¸€äº›ç©ºæ—¥å¿— ğŸ˜¢ ï¼ŒğŸ¦¢ï¼Œè¿™æ˜¯å‘ç”Ÿäº†å•¥ï¼Ÿ</p> <p>é¦–å…ˆæˆ‘ä»¬å›å¿†ä¸‹è¿™ä¸ªé“¾è·¯ä¸Šæœ‰å“ªäº›ç¯èŠ‚å¯èƒ½å­˜åœ¨é—®é¢˜ã€‚æ’æŸ¥é“¾è·¯ï¼ŒSLS é‡‡é›†ç¯èŠ‚ä¹‹å‰æœ‰ç£ç›˜æ—¥å¿—æ”¶é›†ï¼ŒæœåŠ¡ç«¯æ¥æ”¶ï¼ŒSDK ä¸ŠæŠ¥ï¼Œé‚£æˆ‘ä»¬ä¾æ¬¡æ’æŸ¥ã€‚</p> <p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡">å¾€å‰ä¸€æ­¥ï¼Œå‘ç°ç£ç›˜æ—¥å¿—å°±å·²ç»å­˜åœ¨ç©ºæ—¥å¿—ï¼Œé‚£å‰©ä¸‹å°±å¾—çœ‹ä¸€ä¸‹æ¥æ”¶ç«¯ã€SDK ç«¯ã€‚</p> <p>å¼€å§‹åˆ©ç”¨æ§åˆ¶å˜é‡æ³•ï¼Œå…ˆåœ¨ SDK ç«¯è¿›è¡Œç©ºåˆ¤æ–­ï¼Œé˜²æ­¢ç©ºæ—¥å¿—ä¸ŠæŠ¥ã€‚ç»“æœï¼šå‘ç°æ— æ•ˆ ğŸ˜…ã€‚</p> <p>å†ç»§ç»­å¯¹ Node æ¥æ”¶ç«¯å¤„ç†ï¼Œå¯¹æ¥æ”¶åˆ°çš„æ•°æ®è¿›è¡Œåˆ¤ç©ºï¼Œå¦‚æœä¸ºç©ºä¸è¿›è¡Œæ—¥å¿—æ‰“å°ï¼Œç»“æœï¼šä¾ç„¶æ— æ•ˆ ğŸ˜³ã€‚</p> <p>æ‰€ä»¥å¼€å§‹å®šä½æ˜¯ä¸æ˜¯æ—¥å¿—æ‰“å°æœ¬èº«å‡ºäº†ä»€ä¹ˆé—®é¢˜ï¼Ÿç ”ç©¶äº†ä¸‹æ—¥å¿—ç¬¬ä¸‰æ–¹æ—¥å¿—åº“çš„ APIï¼Œè¿›è¡Œäº†å„ç§å°è¯•ï¼Œå‘ç°ä¾æ—§æ²¡ç”¨ï¼Œæˆ‘è„¸é»‘äº† ğŸŒšã€‚</p> <p>ä»€ä¹ˆæƒ…å†µï¼Œâ€œé‡äº‹ä¸å†³â€çœ‹æºç ã€‚æ’æŸ¥ä¸‹æ—¥å¿—åº“æºç å­˜åœ¨ä»€ä¹ˆé—®é¢˜ã€‚å¯¹äºæºç çš„ä¸»è°ƒç”¨æµç¨‹èµ°äº†ä¸€éï¼Œå¹¶æ²¡æœ‰å‘ç°ä»€ä¹ˆé—®é¢˜ï¼Œä¸€å¤´é›¾æ°´ ğŸ™ƒã€‚</p> <p>æ•´ä¸ªä»£ç é€»è¾‘å¾ˆæ­£å¸¸ï¼Œè¿™è®©æˆ‘ä»¬å¼€å§‹æ€€ç–‘éš¾é“æ˜¯æ•°æ®çš„é—®é¢˜ï¼Œäºæ˜¯å¼€å§‹ç¼©å‡ä¸ŠæŠ¥çš„å­—æ®µï¼Œæœ€ç»ˆå®šä¹‰ä¸ºäº†ä¸€ä¸ªå­—æ®µã€‚å‘ç°ä¸Šçº¿åæ²¡æœ‰é—®é¢˜äº† ğŸ˜¢ã€‚</p> <p>éš¾é“æ˜¯æœ‰äº›å­—æ®µå­˜å‚¨çš„æ•°æ®è¿‡é•¿å¯¼è‡´çš„ï¼Ÿä½†ä»ä»£ç é€»è¾‘ã€æµç¨‹æ—¥å¿—ä¸­å¹¶æ²¡æœ‰ååº”è¿™ä¸ªé”™è¯¯çš„å¯èƒ½æ€§ã€‚</p> <p>å› æ­¤æˆ‘ä»¬åˆ©ç”¨äºŒåˆ†æ³•ï¼ŒäºŒåˆ†åœ°å¢åŠ å­—æ®µï¼Œæœ€ç»ˆå®šä½åˆ°äº†æŸä¸ªå­—æ®µã€‚å¦‚æœå­˜åœ¨æŸä¸ªå­—æ®µä¸ŠæŠ¥å°±ä¼šå‡ºç°é—®é¢˜ã€‚è¿™å¾ˆå‡ºä¹äººçš„æ„æ–™ã€‚</p> <p>æˆ‘ä»¬å†æƒ³äº†ä¸‹é“¾è·¯ï¼Œé™¤äº†æ—¥å¿—åº“ï¼Œå…¶ä»–ä»£ç åŸºæœ¬éƒ½æ˜¯æˆ‘ä»¬è‡ªå·±çš„é€»è¾‘ï¼Œæ‰€ä»¥å¯¹æ—¥å¿—åº“è¿›è¡Œäº†æ’æŸ¥ï¼Œæ€€ç–‘å…¶å¯¹æŸä¸ªå­—æ®µåšäº†ä»€ä¹ˆå¤„ç†ã€‚</p> <p>äºæ˜¯é€šè¿‡æœç´¢ï¼Œå®šä½åˆ°äº†æ—¥å¿—åº“åœ¨ä»†ä»æ¨¡å¼ï¼ˆå¯ä»¥äº†è§£ä¸‹ Node çš„ä¸»ä»æ¨¡å¼ï¼‰ä¸‹ä¼šä½¿ç”¨æŸä¸ªå­—æ®µæ¥è¡¨æ„ï¼Œå¯¼è‡´å’Œæˆ‘ä»¬ä¸ŠæŠ¥çš„å­—æ®µå†²çªï¼Œå› æ­¤ä¸¢å¤±äº† ğŸ¤ªã€‚</p> <h3 id="æ—¥å¿—ä¸¢å¤±é—®é¢˜"><a href="#æ—¥å¿—ä¸¢å¤±é—®é¢˜" class="header-anchor">#</a> æ—¥å¿—ä¸¢å¤±é—®é¢˜</h3> <p>è§£å†³äº†ä¸Šä¸ªé—®é¢˜ï¼Œå¼€å¿ƒäº†ï¼Œä¸€è‚¡æˆå°±æ„Ÿæ¶Œä¸Šå¿ƒå¤´ã€‚ä½†é©¬ä¸Šå°±è¢«å½“å¤´ä¸€æ£’ï¼Œæˆ‘å‘ç°æˆ‘é«˜å…´çš„å¤ªæ—©äº† ğŸ¤®ã€‚</p> <p>å›¢é˜Ÿçš„æŸåŒå­¦åœ¨æœ¬åœ°æµ‹è¯•çš„æ—¶å€™ï¼Œç”±äºç©çš„å¾ˆå¼€å¿ƒï¼Œä¸€ç›´å»åˆ·æ–°é¡µé¢å»ä¸ŠæŠ¥å½“å‰é¡µé¢çš„é”™è¯¯ã€‚ä½†ä»–å‘ç°æœ¬åœ°ä¸ŠæŠ¥çš„æ¡æ•°å’Œå®é™…æ—¥å¿—æœåŠ¡é‡Œçš„æ¡æ•°å¯¹ä¸ä¸Šï¼Œæ—¥å¿—æœåŠ¡é‡Œçš„å°‘äº†å¾ˆå¤šã€‚</p> <p>ç”±äºä¹‹å‰è‡ªèº«åˆšæ¯•ä¸šæ—¶å€™åšè¿‡ 2 å¹´å¤šåç«¯å¼€å‘ï¼Œå¯¹äº IO æ“ä½œä¸¢å¤±æ•°æ®è¿˜æ˜¯æœ‰ç‚¹æ•æ„Ÿã€‚ç›´è§‰ä¸Šå°±æ„Ÿè§‰å¯èƒ½æ˜¯å¤šè¿›ç¨‹æ–¹å‘çš„é—®é¢˜ã€‚æ€€ç–‘æ˜¯å¤šè¿›ç¨‹å¯¼è‡´çš„æ–‡ä»¶æ­»é”é—®é¢˜ã€‚</p> <p>é‚£æˆ‘ä»¬å»æ‰å¤šçº¿ç¨‹ï¼Œé€šè¿‡å•çº¿ç¨‹ï¼Œæˆ‘ä»¬å»é‡å¤åŸå…ˆå¤ç°é—®é¢˜çš„æ­¥éª¤ã€‚å‘ç°æ²¡æœ‰é—æ¼ ğŸ¤­ã€‚</p> <p>æˆ‘ä»¬å‘ç°èƒ½è¿›è¡Œé…ç½® Clusterï¼ˆä¸»ä»æ¨¡å¼ï¼‰çš„åœ°æ–¹æœ‰ä¸¤å¤„ï¼Œæ—¥å¿—åº“å’Œéƒ¨ç½²å·¥å…·ã€‚</p> <p>è§‚å¯Ÿæ—¥å¿—åº“é»˜è®¤ä½¿ç”¨çš„ä¸»ä»è¿›ç¨‹æ¨¡å¼ï¼Œè€Œéƒ¨ç½²å·¥å…·æ²¡æœ‰ä¸»ä»æ¨¡å¼çš„æ¦‚å¿µï¼ŒåŠ¿å¿…ä¼šå¯¼è‡´å†™å…¥ IO çš„æ­»é”é—®é¢˜ï¼Œå¯¼è‡´æ—¥å¿—ä¸¢å¤±ã€‚äºæ˜¯åœ¨æƒ³ç¤¾åŒºæœ‰æ²¡æœ‰å¯ä»¥æœ‰è§£å†³æ­¤é—®é¢˜çš„ç¬¬ä¸‰æ–¹æ”¯æŒã€‚</p> <p>ç„¶åé€šè¿‡è°·æ­Œæœç´¢ï¼Œå¾ˆå¿«å°±æ‰¾åˆ°äº†å¯¹åº”çš„ç¬¬ä¸‰æ–¹åº“ï¼Œå®ƒèƒ½æä¾›ä¸»äººè¿›ç¨‹å’Œä»†ä»è¿›ç¨‹ä¹‹é—´çš„æ¶ˆæ¯æ²Ÿé€šã€‚åŸç†æ˜¯ä¸»äººè¿›ç¨‹è´Ÿè´£æ‰€æœ‰æ¶ˆæ¯å†™å…¥ logï¼Œè€Œä»†ä»è¿›ç¨‹é€šè¿‡æ¶ˆæ¯ä¼ é€’ç»™ä¸»äººè¿›ç¨‹ã€‚</p> <h1 id="æ¨èé˜…è¯»åŠå¼•ç”¨"><a href="#æ¨èé˜…è¯»åŠå¼•ç”¨" class="header-anchor">#</a> æ¨èé˜…è¯»åŠå¼•ç”¨</h1> <p>å¤„ç†å¼‚å¸¸</p> <blockquote><p>å¦‚ä½•ä¼˜é›…å¤„ç†å‰ç«¯å¼‚å¸¸ï¼Ÿ[4]</p></blockquote> <p>source-map</p> <blockquote><p><a href="https://mp.weixin.qq.com/s?__biz=MzkxNDIzNTg4MA==&amp;mid=2247484211&amp;idx=1&amp;sn=1fe17b3d2f8d74267bb20c61fcf8204d&amp;scene=21#wechat_redirect" target="_blank" rel="noopener noreferrer">SourceMap ä¸å‰ç«¯å¼‚å¸¸ç›‘æ§<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <p>React é”™è¯¯</p> <blockquote><p><a href="https://mp.weixin.qq.com/s?__biz=MzUzNjk5MTE1OQ==&amp;mid=2247505631&amp;idx=1&amp;sn=0d6228af42fe5757dca0d8773bab2b12&amp;scene=21#wechat_redirect" target="_blank" rel="noopener noreferrer">Reactï¼Œä¼˜é›…çš„æ•è·å¼‚å¸¸<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <p>Script Error</p> <blockquote><p>Capture and report JavaScript errors with window.onerror | Product Blog â€¢ Sentry[5] &gt; [What the heck is &quot;Script error&quot;? | Product Blog â€¢ Sentry](https://blog.sentry.io/2016/05/17/what-is-script-error &quot;What the heck is &quot;Script error&quot;? | Product Blog â€¢ Sentry&quot;)</p></blockquote> <p>æ•´ä½“</p> <blockquote><p>å‰ç«¯æç›‘æ§|Allan - å¦‚ä½•å®ç°ä¸€å¥—å¤šç«¯é”™è¯¯ç›‘æ§å¹³å°[6] &gt; ä¸€æ­¥ä¸€æ­¥æ­å»ºå‰ç«¯ç›‘æ§ç³»ç»Ÿï¼šJS é”™è¯¯ç›‘æ§ç¯‡[7] &gt; æ’¸ä¸€ä¸ªå‰ç«¯ç›‘æ§ç³»ç»Ÿ[8]</p></blockquote> <p>ä¹‹å‰å¼€æ”¾æ—¥è‡ªå·±æ¼”è®²çš„</p> <p>[1]ä½¿ç”¨ 1*1 çš„ gif: <em>https://g.yuque.com/zaotalk/posts/mxx4cb#QUH0x</em></p> <p>[2]æ—¥å¿—æœåŠ¡: <em>https://www.aliyun.com/product/sls</em></p> <p>[3]è¡Œä¸ºç›‘æ§: <em>https://www.yuque.com/zaotalk/posts/mxx4cb#De5Se</em></p> <p>[4]å¦‚ä½•ä¼˜é›…å¤„ç†å‰ç«¯å¼‚å¸¸ï¼Ÿ: <em>http://jartto.wang/2018/11/20/js-exception-handling/index.html</em></p> <p>[5]Capture and report JavaScript errors with window.onerror | Product Blog â€¢ Sentry: <em>https://blog.sentry.io/2016/01/04/client-javascript-reporting-window-onerror</em></p> <p>[6]å‰ç«¯æç›‘æ§|Allan - å¦‚ä½•å®ç°ä¸€å¥—å¤šç«¯é”™è¯¯ç›‘æ§å¹³å°: <em>https://www.yuque.com/zaotalk/posts/mxx4cb</em></p> <p>[7]ä¸€æ­¥ä¸€æ­¥æ­å»ºå‰ç«¯ç›‘æ§ç³»ç»Ÿï¼šJS é”™è¯¯ç›‘æ§ç¯‡: <em>https://blog.fundebug.com/2019/07/06/how-to-monitor-javascript-error/</em></p> <p>[8]æ’¸ä¸€ä¸ªå‰ç«¯ç›‘æ§ç³»ç»Ÿ: <em>https://juejin.im/post/6844904054334685197</em></p> <p>[9]ç»“æŸè£¸å¥” ppt: <em>https://yun.tuia.cn/tuia/fed/openday/%E9%94%99%E8%AF%AF%E7%9B%91%E6%8E%A7%E5%A4%A9%E7%9C%BC%20-%20%E7%BB%93%E6%9D%9F%E8%A3%B8%E5%A5%94.pdf</em></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">5/8/2024, 3:01:19 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/performance/ä»å‰ç«¯æ€§èƒ½ä¼˜åŒ–å¼•ç”³å‡ºæ¥çš„5é“ç»å…¸é¢è¯•é¢˜.html" class="prev">
        ä»å‰ç«¯æ€§èƒ½ä¼˜åŒ–å¼•ç”³å‡ºæ¥çš„ 5 é“ç»å…¸é¢è¯•é¢˜
      </a></span> <span class="next"><a href="/performance/æ€§èƒ½ä¼˜åŒ–.html">
        å†™ç»™ä¸­é«˜çº§å‰ç«¯å…³äºæ€§èƒ½ä¼˜åŒ–çš„9å¤§ç­–ç•¥å’Œ6å¤§æŒ‡æ ‡
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.07981acf.js" defer></script><script src="/assets/js/2.57da4f88.js" defer></script><script src="/assets/js/1.a76cc220.js" defer></script><script src="/assets/js/87.72c01e68.js" defer></script>
  </body>
</html>
