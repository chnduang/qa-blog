<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>webpack相关问题及答案的整理 | duangdong的qa</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/logo.png">
    <link rel="manifest" href="/manifest.json">
    <script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?0088ce24040b03f2947322ab31d23414";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
  </script>
    <script>
  var _hmt = _hmt || [];
  _hmt.push(['_requirePlugin', 'UrlChangeTracker', {
    shouldTrackUrlChange: function (newPath, oldPath) {
      newPath = newPath.split('#')[0];
      oldPath = oldPath.split('#')[0];
      return newPath != oldPath;
    }}
  ]);
  </script>
    <meta name="description" content="前端QA集锦">
    <meta name="keywords" content="qd-blog,js,vuepress,leetcode,react,react进阶,css,js进阶,react性能优化,js设计模式">
    
    <link rel="preload" href="/assets/css/0.styles.b4a844ec.css" as="style"><link rel="preload" href="/assets/js/app.07981acf.js" as="script"><link rel="preload" href="/assets/js/2.57da4f88.js" as="script"><link rel="preload" href="/assets/js/1.a76cc220.js" as="script"><link rel="preload" href="/assets/js/150.ff7b0269.js" as="script"><link rel="prefetch" href="/assets/js/10.50f73657.js"><link rel="prefetch" href="/assets/js/100.ed998eb0.js"><link rel="prefetch" href="/assets/js/101.c8472505.js"><link rel="prefetch" href="/assets/js/102.d600a66c.js"><link rel="prefetch" href="/assets/js/103.c2d41a43.js"><link rel="prefetch" href="/assets/js/104.dc119219.js"><link rel="prefetch" href="/assets/js/105.8707757e.js"><link rel="prefetch" href="/assets/js/106.33c299b9.js"><link rel="prefetch" href="/assets/js/107.8eafcc06.js"><link rel="prefetch" href="/assets/js/108.eeb8c861.js"><link rel="prefetch" href="/assets/js/109.d7579372.js"><link rel="prefetch" href="/assets/js/11.0390ceee.js"><link rel="prefetch" href="/assets/js/110.4cdb688a.js"><link rel="prefetch" href="/assets/js/111.95d0f748.js"><link rel="prefetch" href="/assets/js/112.fae5a13a.js"><link rel="prefetch" href="/assets/js/113.7cefcf49.js"><link rel="prefetch" href="/assets/js/114.49f03fa7.js"><link rel="prefetch" href="/assets/js/115.73eebb69.js"><link rel="prefetch" href="/assets/js/116.3b9205f3.js"><link rel="prefetch" href="/assets/js/117.dc4fcb53.js"><link rel="prefetch" href="/assets/js/118.1191553b.js"><link rel="prefetch" href="/assets/js/119.705d33d0.js"><link rel="prefetch" href="/assets/js/12.f88bec36.js"><link rel="prefetch" href="/assets/js/120.d3227497.js"><link rel="prefetch" href="/assets/js/121.32bcc7c2.js"><link rel="prefetch" href="/assets/js/122.55a7d973.js"><link rel="prefetch" href="/assets/js/123.07b3f53a.js"><link rel="prefetch" href="/assets/js/124.851c0100.js"><link rel="prefetch" href="/assets/js/125.c1de1f95.js"><link rel="prefetch" href="/assets/js/126.ea96a075.js"><link rel="prefetch" href="/assets/js/127.bcf311b8.js"><link rel="prefetch" href="/assets/js/128.e1c4d95e.js"><link rel="prefetch" href="/assets/js/129.09afee9c.js"><link rel="prefetch" href="/assets/js/13.963ad03b.js"><link rel="prefetch" href="/assets/js/130.22372a24.js"><link rel="prefetch" href="/assets/js/131.4db39cda.js"><link rel="prefetch" href="/assets/js/132.afcfdf65.js"><link rel="prefetch" href="/assets/js/133.35b0df52.js"><link rel="prefetch" href="/assets/js/134.9ad9188e.js"><link rel="prefetch" href="/assets/js/135.d7ca4b93.js"><link rel="prefetch" href="/assets/js/136.403dc2de.js"><link rel="prefetch" href="/assets/js/137.f972aed9.js"><link rel="prefetch" href="/assets/js/138.7536ef7d.js"><link rel="prefetch" href="/assets/js/139.05186195.js"><link rel="prefetch" href="/assets/js/14.512f15b9.js"><link rel="prefetch" href="/assets/js/140.f7b5e550.js"><link rel="prefetch" href="/assets/js/141.16938126.js"><link rel="prefetch" href="/assets/js/142.0d18982a.js"><link rel="prefetch" href="/assets/js/143.f82390e5.js"><link rel="prefetch" href="/assets/js/144.bac62f6d.js"><link rel="prefetch" href="/assets/js/145.255f2397.js"><link rel="prefetch" href="/assets/js/146.226da4b5.js"><link rel="prefetch" href="/assets/js/147.236f8a9f.js"><link rel="prefetch" href="/assets/js/148.8d472c06.js"><link rel="prefetch" href="/assets/js/149.4170f8c0.js"><link rel="prefetch" href="/assets/js/15.a674496c.js"><link rel="prefetch" href="/assets/js/151.0a1c7058.js"><link rel="prefetch" href="/assets/js/152.584c412a.js"><link rel="prefetch" href="/assets/js/153.220d027b.js"><link rel="prefetch" href="/assets/js/154.09a9219e.js"><link rel="prefetch" href="/assets/js/155.6c8dbf71.js"><link rel="prefetch" href="/assets/js/156.a9d81dce.js"><link rel="prefetch" href="/assets/js/157.e53c1adb.js"><link rel="prefetch" href="/assets/js/158.11f55456.js"><link rel="prefetch" href="/assets/js/159.2c05d7f2.js"><link rel="prefetch" href="/assets/js/16.ed7e507f.js"><link rel="prefetch" href="/assets/js/160.27616923.js"><link rel="prefetch" href="/assets/js/17.de667ca5.js"><link rel="prefetch" href="/assets/js/18.b44e84af.js"><link rel="prefetch" href="/assets/js/19.5b5ad6a1.js"><link rel="prefetch" href="/assets/js/20.6800493a.js"><link rel="prefetch" href="/assets/js/21.6589052c.js"><link rel="prefetch" href="/assets/js/22.f648d829.js"><link rel="prefetch" href="/assets/js/23.21fe11d7.js"><link rel="prefetch" href="/assets/js/24.7a3e65b2.js"><link rel="prefetch" href="/assets/js/25.9e2d6c46.js"><link rel="prefetch" href="/assets/js/26.0dcf1d19.js"><link rel="prefetch" href="/assets/js/27.bd79a51b.js"><link rel="prefetch" href="/assets/js/28.ad9cdafd.js"><link rel="prefetch" href="/assets/js/29.738a8c4a.js"><link rel="prefetch" href="/assets/js/3.13e892f5.js"><link rel="prefetch" href="/assets/js/30.5d2ae7ae.js"><link rel="prefetch" href="/assets/js/31.2a59449c.js"><link rel="prefetch" href="/assets/js/32.322ed58f.js"><link rel="prefetch" href="/assets/js/33.e18917c7.js"><link rel="prefetch" href="/assets/js/34.edfe8355.js"><link rel="prefetch" href="/assets/js/35.2c0b1e3e.js"><link rel="prefetch" href="/assets/js/36.b1fdf51f.js"><link rel="prefetch" href="/assets/js/37.11ee0b0c.js"><link rel="prefetch" href="/assets/js/38.0b050ca5.js"><link rel="prefetch" href="/assets/js/39.2bd20762.js"><link rel="prefetch" href="/assets/js/4.5bdb9365.js"><link rel="prefetch" href="/assets/js/40.eb0c66c8.js"><link rel="prefetch" href="/assets/js/41.933044bc.js"><link rel="prefetch" href="/assets/js/42.eac4ba39.js"><link rel="prefetch" href="/assets/js/43.8c61e37d.js"><link rel="prefetch" href="/assets/js/44.30f132bb.js"><link rel="prefetch" href="/assets/js/45.2477f9bb.js"><link rel="prefetch" href="/assets/js/46.e97df854.js"><link rel="prefetch" href="/assets/js/47.60f16a00.js"><link rel="prefetch" href="/assets/js/48.d01b463f.js"><link rel="prefetch" href="/assets/js/49.e3a15fc7.js"><link rel="prefetch" href="/assets/js/5.7c68fdb5.js"><link rel="prefetch" href="/assets/js/50.31265493.js"><link rel="prefetch" href="/assets/js/51.ed2cc5dc.js"><link rel="prefetch" href="/assets/js/52.3ae02665.js"><link rel="prefetch" href="/assets/js/53.69d15c58.js"><link rel="prefetch" href="/assets/js/54.bbab20a0.js"><link rel="prefetch" href="/assets/js/55.9617cf7e.js"><link rel="prefetch" href="/assets/js/56.13f9aef2.js"><link rel="prefetch" href="/assets/js/57.ba08cc35.js"><link rel="prefetch" href="/assets/js/58.63028d02.js"><link rel="prefetch" href="/assets/js/59.566c0b50.js"><link rel="prefetch" href="/assets/js/6.c8da7ca7.js"><link rel="prefetch" href="/assets/js/60.0801f3b3.js"><link rel="prefetch" href="/assets/js/61.ceae0570.js"><link rel="prefetch" href="/assets/js/62.9f28e1a4.js"><link rel="prefetch" href="/assets/js/63.15282044.js"><link rel="prefetch" href="/assets/js/64.7c666983.js"><link rel="prefetch" href="/assets/js/65.320c4670.js"><link rel="prefetch" href="/assets/js/66.253bab14.js"><link rel="prefetch" href="/assets/js/67.49c1e967.js"><link rel="prefetch" href="/assets/js/68.ae82def1.js"><link rel="prefetch" href="/assets/js/69.0877ad54.js"><link rel="prefetch" href="/assets/js/7.e4c88d0e.js"><link rel="prefetch" href="/assets/js/70.5e8208ea.js"><link rel="prefetch" href="/assets/js/71.52cb4845.js"><link rel="prefetch" href="/assets/js/72.8c575d51.js"><link rel="prefetch" href="/assets/js/73.b9ba874e.js"><link rel="prefetch" href="/assets/js/74.6b4693bb.js"><link rel="prefetch" href="/assets/js/75.e9378ce1.js"><link rel="prefetch" href="/assets/js/76.a80b13fc.js"><link rel="prefetch" href="/assets/js/77.d134968d.js"><link rel="prefetch" href="/assets/js/78.40d99cd8.js"><link rel="prefetch" href="/assets/js/79.2b663044.js"><link rel="prefetch" href="/assets/js/80.0b63f3ac.js"><link rel="prefetch" href="/assets/js/81.bc4031db.js"><link rel="prefetch" href="/assets/js/82.3152c02c.js"><link rel="prefetch" href="/assets/js/83.3fa2dc4b.js"><link rel="prefetch" href="/assets/js/84.e778c959.js"><link rel="prefetch" href="/assets/js/85.060ddc49.js"><link rel="prefetch" href="/assets/js/86.bb8138bb.js"><link rel="prefetch" href="/assets/js/87.72c01e68.js"><link rel="prefetch" href="/assets/js/88.e3e56223.js"><link rel="prefetch" href="/assets/js/89.198ff8d1.js"><link rel="prefetch" href="/assets/js/90.6437abb2.js"><link rel="prefetch" href="/assets/js/91.dbe1df52.js"><link rel="prefetch" href="/assets/js/92.6e732f3a.js"><link rel="prefetch" href="/assets/js/93.e98beea7.js"><link rel="prefetch" href="/assets/js/94.c62e88cb.js"><link rel="prefetch" href="/assets/js/95.f6aad986.js"><link rel="prefetch" href="/assets/js/96.e0630547.js"><link rel="prefetch" href="/assets/js/97.3cd76aa5.js"><link rel="prefetch" href="/assets/js/98.3bc2adce.js"><link rel="prefetch" href="/assets/js/99.88c20858.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.5143d2e0.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b4a844ec.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">duangdong的qa</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/js/" class="nav-link">
  JS方面
</a></div><div class="nav-item"><a href="/webpack/" class="nav-link router-link-active">
  Webpack
</a></div><div class="nav-item"><a href="/react/" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/summary/" class="nav-link">
  汇总
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  常见算法
</a></div><div class="nav-item"><a href="/performance/" class="nav-link">
  性能优化
</a></div><div class="nav-item"><a href="/http/" class="nav-link">
  网络协议
</a></div><div class="nav-item"><a href="/css/" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/face-sutra/" class="nav-link">
  QA
</a></div><div class="nav-item"><a href="https://link.aduang.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/js/" class="nav-link">
  JS方面
</a></div><div class="nav-item"><a href="/webpack/" class="nav-link router-link-active">
  Webpack
</a></div><div class="nav-item"><a href="/react/" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/summary/" class="nav-link">
  汇总
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  常见算法
</a></div><div class="nav-item"><a href="/performance/" class="nav-link">
  性能优化
</a></div><div class="nav-item"><a href="/http/" class="nav-link">
  网络协议
</a></div><div class="nav-item"><a href="/css/" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/face-sutra/" class="nav-link">
  QA
</a></div><div class="nav-item"><a href="https://link.aduang.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/webpack/" aria-current="page" class="sidebar-link">Webpack</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>1-优化</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/webpack/tree-shaking.html" class="sidebar-link">介绍一下 tree shaking 及其工作原理</a></li><li><a href="/webpack/webpack 中的 loader 的作用是什么.html" class="sidebar-link">webpack 中的 loader 的作用是什么</a></li><li><a href="/webpack/webpack中什么是 HMR原理是什么.html" class="sidebar-link">webpack中什么是 HMR原理是什么</a></li><li><a href="/webpack/webpack中的 codespliting 是如何动态加载chunk的.html" class="sidebar-link">webpack中的 codespliting 是如何动态加载chunk的</a></li><li><a href="/webpack/webpack的runtime做了什么事情.html" class="sidebar-link">webpack的runtime做了什么事情</a></li><li><a href="/webpack/webpack相关问题及答案的整理.html" class="active sidebar-link">webpack相关问题及答案的整理</a></li><li><a href="/webpack/什么是 AST及其应用.html" class="sidebar-link">什么是 AST及其应用</a></li><li><a href="/webpack/介绍下webpack 热更新原理，是如何做到在不刷新浏览器的前提下更新页面的.html" class="sidebar-link">介绍下webpack 热更新原理，是如何做到在不刷新浏览器的前提下更新页面的</a></li><li><a href="/webpack/如何加载 json-image 等非 Javascript 资源.html" class="sidebar-link">如何加载 json-image 等非 Javascript 资源</a></li><li><a href="/webpack/如何加载 style 样式资源.html" class="sidebar-link">如何加载 style 样式资源</a></li><li><a href="/webpack/如何将CommonJS转化为ESM.html" class="sidebar-link">如何将CommonJS转化为ESM</a></li><li><a href="/webpack/如何将打包后的 js 资源注入 html 中.html" class="sidebar-link">如何将打包后的 js 资源注入 html 中</a></li><li><a href="/webpack/对于已经 import 但未实际使用的模块使用 webpack 还会对它打包吗.html" class="sidebar-link">对于已经 import 但未实际使用的模块使用 webpack 还会对它打包吗</a></li><li><a href="/webpack/当问Webpack的时候他想知道什么.html" class="sidebar-link">Webpack能够做些什么</a></li><li><a href="/webpack/模块化中umd-cjs-esm有何区别.html" class="sidebar-link">模块化中 umd、cjs 和 esm 有何区别？</a></li><li><a href="/webpack/浏览器中如何使用原生的 ESM.html" class="sidebar-link">浏览器中如何使用原生的ESM</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="webpack相关问题及答案的整理"><a href="#webpack相关问题及答案的整理" class="header-anchor">#</a> webpack相关问题及答案的整理</h1> <blockquote><p><a href="https://mp.weixin.qq.com/s/JCRSwo3uqSU949y32qSRbA" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s/JCRSwo3uqSU949y32qSRbA<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h2 id="_1-webpack-的作用是什么-谈谈你对它的理解"><a href="#_1-webpack-的作用是什么-谈谈你对它的理解" class="header-anchor">#</a> 1.webpack 的作用是什么,谈谈你对它的理解</h2> <p>现在的前端网页功能丰富，特别是 SPA（single page web application 单页应用）技术流行后，JavaScript 的复杂度增加和需要一大堆依赖包，还需要解决 Scss，Less……新增样式的扩展写法的编译工作。</p> <p>所以现代化的前端已经完全依赖于 webpack 的辅助了。</p> <p>现在最流行的三个前端框架，可以说和 webpack 已经紧密相连，框架官方都推出了和自身框架依赖的 webpack 构建工具。</p> <p>react.js+WebPack</p> <p>vue.js+WebPack</p> <p>AngluarJS+WebPack</p> <h2 id="_2-webpack-的工作原理"><a href="#_2-webpack-的工作原理" class="header-anchor">#</a> 2.webpack 的工作原理</h2> <p>WebPack 可以看做是模块打包机：它做的事情是，分析你的项目结构，找到 JavaScript 模块以及其它的一些浏览器不能直接运行的拓展语言（Sass，TypeScript 等），并将其转换和打包为合适的格式供浏览器使用。在 3.0 出现后，Webpack 还肩负起了优化项目的责任。</p> <h2 id="_3-webpack-打包原理"><a href="#_3-webpack-打包原理" class="header-anchor">#</a> 3.webpack 打包原理</h2> <p>把一切都视为模块：不管是 css、JS、Image 还是 html 都可以互相引用，通过定义 entry.js，对所有依赖的文件进行跟踪，将各个模块通过 loader 和 plugins 处理，然后打包在一起。</p> <p>按需加载：打包过程中 Webpack 通过 Code Splitting 功能将文件分为多个 chunks，还可以将重复的部分单独提取出来作为 commonChunk，从而实现按需加载。把所有依赖打包成一个 bundle.js 文件，通过代码分割成单元片段并按需加载</p> <h2 id="_4-webpack-的核心概念"><a href="#_4-webpack-的核心概念" class="header-anchor">#</a> 4.webpack 的核心概念</h2> <ul><li>Entry：入口，Webpack 执行构建的第一步将从 Entry 开始，可抽象成输入。告诉 webpack 要使用哪个模块作为构建项目的起点，默认为./src/index.js</li> <li>output ：出口，告诉 webpack 在哪里输出它打包好的代码以及如何命名，默认为./dist</li> <li>Module：模块，在 Webpack 里一切皆模块，一个模块对应着一个文件。Webpack 会从配置的 Entry 开始递归找出所有依赖的模块。</li> <li>Chunk：代码块，一个 Chunk 由多个模块组合而成，用于代码合并与分割。</li> <li>Loader：模块转换器，用于把模块原内容按照需求转换成新内容。</li> <li>Plugin：扩展插件，在 Webpack 构建流程中的特定时机会广播出对应的事件，插件可以监听这些事件的发生，在特定时机做对应的事情。</li></ul> <h2 id="_5-webpack-的基本功能有哪些"><a href="#_5-webpack-的基本功能有哪些" class="header-anchor">#</a> 5.Webpack 的基本功能有哪些</h2> <ul><li>代码转换：TypeScript 编译成 JavaScript、SCSS 编译成 CSS 等等</li> <li>文件优化：压缩 JavaScript、CSS、html 代码，压缩合并图片等</li> <li>代码分割：提取多个页面的公共代码、提取首屏不需要执行部分的代码让其异步加载</li> <li>模块合并：在采用模块化的项目有很多模块和文件，需要构建功能把模块分类合并成一个文件</li> <li>自动刷新：监听本地源代码的变化，自动构建，刷新浏览器</li> <li>代码校验：在代码被提交到仓库前需要检测代码是否符合规范，以及单元测试是否通过</li> <li>自动发布：更新完代码后，自动构建出线上发布代码并传输给发布系统。</li></ul> <h2 id="_6-gulp-grunt与webpack的区别是什么"><a href="#_6-gulp-grunt与webpack的区别是什么" class="header-anchor">#</a> 6.gulp/grunt与webpack的区别是什么</h2> <p>三者都是前端构建工具，grunt 和 gulp 在早期比较流行，现在 webpack 相对来说比较主流，不过一些轻量化的任务还是会用 gulp 来处理，比如单独打包 CSS 文件等。
grunt 和 gulp 是基于任务和流（Task、Stream）的。</p> <p>类似 jQuery，找到一个（或一类）文件，对其做一系列链式操作，更新流上的数据， 整条链式操作构成了一个任务，多个任务就构成了整个 web 的构建流程。
webpack 是基于入口的。</p> <p>webpack 会自动地递归解析入口所需要加载的所有资源文件，然后用不同的 Loader 来处理不同的文件，用 Plugin 来扩展 webpack 功能。</p> <h2 id="_7-webpack是解决什么问题而生的"><a href="#_7-webpack是解决什么问题而生的" class="header-anchor">#</a> 7.webpack是解决什么问题而生的?</h2> <p>如果像以前开发时一个 html 文件可能会引用十几个 js 文件,而且顺序还不能乱，因为它们存在依赖关系，同时对于 ES6+等新的语法，less, sass 等 CSS 预处理都不能很好的解决……，此时就需要一个处理这些问题的工具。</p> <h2 id="_8-你是如何提高webpack构件速度的"><a href="#_8-你是如何提高webpack构件速度的" class="header-anchor">#</a> 8.你是如何提高webpack构件速度的</h2> <p>多入口情况下，使用 CommonsChunkPlugin 来提取公共代码</p> <p>通过 externals 配置来提取常用库</p> <p>利用 DllPlugin 和 DllReferencePlugin 预编译资源模块通过 DllPlugin 来对那些我们</p> <p>引用但是绝对不会修改的 npm 包来进行预编译，再通过 DllReferencePlugin 将预编译的模块加载进来。</p> <p>使用 Happypack 实现多线程加速编译</p> <p>使用 webpack-uglify-paralle 来提升 uglifyPlugin 的压缩速度。</p> <p>原理上 webpack-uglify-parallel 采用了多核并行压缩来提升压缩速度
使用 Tree-shaking 和 Scope Hoisting 来剔除多余代码</p> <h2 id="_9-如何利用-webpack-来更好的构建npm"><a href="#_9-如何利用-webpack-来更好的构建npm" class="header-anchor">#</a> 9.如何利用 webpack 来更好的构建npm</h2> <p>Npm 是目前最大的 JavaScript 模块仓库，里面有来自全世界开发者上传的可复用模块。</p> <p>你可能只是 JS 模块的使用者，但是有些情况你也会去选择上传自己开发的模块。</p> <p>关于 NPM 模块上传的方法可以去官网上进行学习，这里只讲解如何利用 webpack 来构建。</p> <p>NPM 模块需要注意以下问题：</p> <ol><li>要支持 CommonJS 模块化规范，所以要求打包后的最后结果也遵守该规则。</li> <li>Npm 模块使用者的环境是不确定的，很有可能并不支持 ES6，所以打包的最后结果应该是采用 ES5 编写的。并且如果 ES5 是经过转换的，请最好连同 SourceMap 一同上传。</li> <li>Npm 包大小应该是尽量小（有些仓库会限制包大小）</li> <li>发布的模块不能将依赖的模块也一同打包，应该让用户选择性的去自行安装。这样可以避免模块应用者再次打包时出现底层模块被重复打包的情况。</li> <li>UI 组件类的模块应该将依赖的其它资源文件，例如.css 文件也需要包含在发布的模块里。</li></ol> <h2 id="_10-前端为什么要进行打包和构建"><a href="#_10-前端为什么要进行打包和构建" class="header-anchor">#</a> <strong>10.前端为什么要进行打包和构建？</strong></h2> <p>代码层面：</p> <ul><li>体积更小（Tree-shaking、压缩、合并），加载更快</li> <li>编译高级语言和语法（TS、ES6、模块化、scss）</li> <li>兼容性和错误检查（polyfill,postcss,eslint）</li></ul> <p>研发流程层面：</p> <ul><li>统一、高效的开发环境</li> <li>统一的构建流程和产出标准</li> <li>集成公司构建规范（提测、上线）</li></ul> <h2 id="_11-webpack的构建流程是什么-从读取配置到输出文件"><a href="#_11-webpack的构建流程是什么-从读取配置到输出文件" class="header-anchor">#</a> 11.webpack的构建流程是什么?从读取配置到输出文件</h2> <p>Webpack 的运行流程是一个串行的过程，从启动到结束会依次执行以下流程：</p> <ul><li>初始化参数：从配置文件和 Shell 语句中读取与合并参数，得出最终的参数；</li> <li>开始编译：用上一步得到的参数初始化 Compiler 对象，加载所有配置的插件，执行对象的 run 方法开始执行编译；</li> <li>确定入口：根据配置中的 entry 找出所有的入口文件；</li> <li>编译模块：从入口文件出发，调用所有配置的 Loader 对模块进行翻译，再找出该模块依赖的模块，再递归本步骤直到所有入口依赖的文件都经过了本步骤的处理；</li> <li>完成模块编译：在经过第 4 步使用 Loader 翻译完所有模块后，得到了每个模块被翻译后的最终内容以及它们之间的依赖关系；</li> <li>输出资源：根据入口和模块之间的依赖关系，组装成一个个包含多个模块的 Chunk，再把每个 Chunk 转换成一个单独的文件加入到输出列表，这步是可以修改输出内容的最后机会；</li> <li>输出完成：在确定好输出内容后，根据配置确定输出的路径和文件名，把文件内容写入到文件系统。</li></ul> <p>在以上过程中，Webpack 会在特定的时间点广播出特定的事件，插件在监听到感兴趣的事件后会执行特定的逻辑，并且插件可以调用 Webpack 提供的 API 改变 Webpack 的运行结果。</p> <h2 id="_12-怎么配置单页应用-怎么配置多页应用"><a href="#_12-怎么配置单页应用-怎么配置多页应用" class="header-anchor">#</a> <strong>12.怎么配置单页应用？怎么配置多页应用？</strong></h2> <p>单页应用可以理解为 webpack 的标准模式，直接在 entry 中指定单页应用的入口即可，这里不再赘述</p> <p>多页应用的话，可以使用 webpack 的 AutoWebPlugin 来完成简单自动化的构建，但是前提是项目的目录结构必须遵守他预设的规范。多页应用中要注意的是：</p> <ul><li>每个页面都有公共的代码，可以将这些代码抽离出来，避免重复的加载。比如，每个页面都引用了同一套 css 样式表</li> <li>随着业务的不断扩展，页面可能会不断的追加，所以一定要让入口的配置足够灵活，避免每次添加新页面还需要修改构建配置</li></ul> <h2 id="_13、loader-机制的作用是什么"><a href="#_13、loader-机制的作用是什么" class="header-anchor">#</a> <strong>13、Loader 机制的作用是什么？</strong></h2> <p>webpack 默认只能打包 js 文件，配置里的 module.rules 数组配置了一组规则，告诉 Webpack 在遇到哪些文件时使用哪些 Loader 去加载和转换打包成 js。</p> <p>注意：</p> <p>use 属性的值需要是一个由 Loader 名称组成的数组，Loader 的执行顺序是由后到前的；
每一个 Loader 都可以通过 URL querystring 的方式传入参数，例如 css-loader?minimize 中的 minimize 告诉 css-loader 要开启 CSS 压缩。</p> <h2 id="_14、常用-loader"><a href="#_14、常用-loader" class="header-anchor">#</a> <strong>14、常用 loader</strong></h2> <ul><li><p>css-loader</p> <p>读取 合并 CSS 文件</p></li> <li><p>style-loader</p> <p>把 CSS 内容注入到 JavaScript 里</p></li> <li><p>sass-loader</p> <p>解析 sass 文件（安装 sass-loader，node-sass）</p></li> <li><p>postcss-loader</p> <p>自动添加浏览器兼容前缀（postcss.config 配置）</p></li> <li><p>url-loader</p> <p>将文件转换为 base64 URI。</p></li> <li><p>vue-loader</p> <p>处理 vue 文件。</p></li></ul> <h2 id="_15、plugin-插件-的作用是什么"><a href="#_15、plugin-插件-的作用是什么" class="header-anchor">#</a> <strong>15、Plugin（插件）的作用是什么？</strong></h2> <p>Plugin 是用来扩展 Webpack 功能的，通过在构建流程里注入钩子实现，它给 Webpack 带来了很大的灵活性。</p> <p>Webpack 是通过 plugins 属性来配置需要使用的插件列表的。plugins 属性是一个数组，里面的每一项都是插件的一个实例，在实例化一个组件时可以通过构造函数传入这个组件支持的配置属性。</p> <h2 id="_16、什么是-bundle-什么是-chunk-什么是-module"><a href="#_16、什么是-bundle-什么是-chunk-什么是-module" class="header-anchor">#</a> <strong>16、什么是 bundle，什么是 chunk，什么是 module</strong></h2> <p>bundle：是由 webpack 打包出来的文件</p> <p>chunk：是指 webpack 在进行模块依赖分析的时候，代码分割出来的代码块</p> <p>module：是开发中的单个模块</p> <h2 id="_17、常见-plugins"><a href="#_17、常见-plugins" class="header-anchor">#</a> <strong>17、常见 Plugins</strong></h2> <ul><li><p>HtmlWebpackPlugin</p> <p>自动在打包结束后生成 html 文件，并引入 bundle.js</p></li> <li><p>cleanwebPackPlugin</p> <p>打包自动删除上次打包文件</p></li></ul> <h2 id="_18、extracttextplugin-插件的作用"><a href="#_18、extracttextplugin-插件的作用" class="header-anchor">#</a> <strong>18、ExtractTextPlugin 插件的作用</strong></h2> <ul><li><p>ExtractTextPlugin</p> <p>插件的作用是提取出 JavaScript 代码里的 CSS 到一个单独的文件。</p> <p>对此你可以通过插件的 filename 属性，告诉插件输出的 CSS 文件名称是通过[name]_[contenthash:8].css 字符串模版生成的</p> <p>里面的[name]代表文件名称，[contenthash:8]代表根据文件内容算出的 8 位 hash 值</p> <p>还有很多配置选项可以在 ExtractTextPlugin 的主页上查到。</p></li></ul> <h2 id="_19、sourcemap"><a href="#_19、sourcemap" class="header-anchor">#</a> <strong>19、sourceMap</strong></h2> <p>是一个映射关系，将打包后的文件隐射到源代码，用于定位报错位置</p> <p>配置方式:</p> <p>例如：devtool：<code>source-map</code>
加不同前缀意义：</p> <ul><li><p>inline:不生成映射关系文件，打包进 main.js</p></li> <li><p>cheap:</p> <ul><li>1.只精确到行，不精确到列，打包速度快</li> <li>2.只管业务代码，不管第三方模块</li></ul></li> <li><p>module：不仅管业务代码，而且管第三方代码</p></li> <li><p>eval:执行效率最快，性能最好</p></li></ul> <p>最佳实践：
开发环境：cheap-module-eval-source-map
线上环境：cheap-mudole-source-map</p> <h2 id="_20、hmr-热模块更新"><a href="#_20、hmr-热模块更新" class="header-anchor">#</a> <strong>20、HMR 热模块更新</strong></h2> <p>借助 <code>webpack.HotModuleReplacementPlugin()</code>，<code>devServer</code> 开启 hot</p> <p>场景 1：实现只刷新 css，不影响 js
场景 2：js 中实现热更新，只更新指定 js 模块</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>module<span class="token punctuation">.</span>hot<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>’<span class="token punctuation">.</span><span class="token operator">/</span>library<span class="token punctuation">.</span>js’<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Do something with the updated library module…</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_21、webpack-如何配置多入口文件"><a href="#_21、webpack-如何配置多入口文件" class="header-anchor">#</a> <strong>21、webpack 如何配置多入口文件?</strong></h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
 <span class="token literal-property property">home</span><span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;src/home/index.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
 <span class="token literal-property property">about</span><span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;src/about/index.js&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>用于描述入口的对象。你可以使用如下属性：</p> <ul><li>dependOn: 当前入口所依赖的入口。它们必须在该入口被加载前被加载。</li> <li>filename: 指定要输出的文件名称。</li> <li>import: 启动时需加载的模块。</li> <li>library: 指定 library 选项，为当前 entry 构建一个 library。</li> <li>runtime: 运行时 chunk 的名字。如果设置了，就会创建一个新的运行时 chunk。在 webpack 5.43.0 之后可将其设为 false 以避免一个新的运行时 chunk。</li> <li>publicPath: 当该入口的输出文件在浏览器中被引用时，为它们指定一个公共 URL 地址</li></ul> <h2 id="_22-polyfill以及runtime区别es-stage-含义-preset-env作用"><a href="#_22-polyfill以及runtime区别es-stage-含义-preset-env作用" class="header-anchor">#</a> 22.polyfill以及runtime区别ES-stage 含义,preset–env作用</h2> <p><strong>1.polyfill 以及 runtime 区别</strong></p> <p>babel-polyfill 的原理是当运行环境中并没有实现的一些方法，babel-polyfill 会做兼容。</p> <p>babel-runtime 它是将 es6 编译成 es5 去执行。我们使用 es6 的语法来编写，最终会通过 babel-runtime 编译成 es5.也就是说，不管浏览器是否支持 ES6，只要是 ES6 的语法，它都会进行转码成 ES5.所以就有很多冗余的代码。</p> <p>babel-polyfill 它是通过向全局对象和内置对象的 prototype 上添加方法来实现的。比如运行环境中不支持 Array.prototype.find 方法，引入 polyfill, 我们就可以使用 es6 方法来编写了，但是缺点就是会造成全局空间污染。</p> <p>babel-runtime: 它不会污染全局对象和内置对象的原型，比如说我们需要 Promise，我们只需要 import Promise from 'babel-runtime/core-js/promise'即可，这样不仅避免污染全局对象，而且可以减少不必要的代码。</p> <p><strong>2.stage-x：指处于某一阶段的 js 语言提案</strong>
Stage 0 - 设想（Strawman）：只是一个想法，可能有 Babel 插件。
Stage 1 - 建议（Proposal）：这是值得跟进的。
Stage 2 - 草案（Draft）：初始规范。
Stage 3 - 候选（Candidate）：完成规范并在浏览器上初步实现。
Stage 4 - 完成（Finished）：将添加到下一个年度版本发布中。</p> <p><strong>3. 理解 babel-preset-env</strong>
babel-preset-es2015: 可以将 es6 的代码编译成 es5.
babel-preset-es2016: 可以将 es7 的代码编译为 es6.
babel-preset-es2017: 可以将 es8 的代码编译为 es7.
babel-preset-latest: 支持现有所有 ECMAScript 版本的新特性</p> <h2 id="_23-什么是模热更新-有什么优点"><a href="#_23-什么是模热更新-有什么优点" class="header-anchor">#</a> 23.什么是模热更新？有什么优点</h2> <p>模块热更新是 <code>webpack</code>的一个功能，它可以使得代码修改之后，不用刷新浏览器就可以更新。</p> <p>在应用过程中替换添加删出模块，无需重新加载整个页面，是高级版的自动刷新浏览器。</p> <p>优点：只更新变更内容，以节省宝贵的开发时间。调整样式更加快速，几乎相当于在浏览器中更改样式</p> <h2 id="_24-lazy-loading-模块懒加载"><a href="#_24-lazy-loading-模块懒加载" class="header-anchor">#</a> 24.lazy-loading（模块懒加载）</h2> <p>借助<code>import()</code>语法异步引入组件，实现文件懒加载：<code>prefetch</code>,<code>preloading</code>
webpack 提倡多写异步代码，提升代码利用率，从而提升页面性能
先加载主业务文件，prefetch 利用网络空闲时间，异步加载组件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackPrefetch: true / ‘LoginModal’);
</span></code></pre></div><p>preload 和主业务文件一起加载，异步加载组件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token operator">/</span> webpackPreload<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token operator">*</span><span class="token operator">/</span> ‘ChartingLibrary’<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_25-什么是长缓存-在-webpack-中如何做到长缓存优化"><a href="#_25-什么是长缓存-在-webpack-中如何做到长缓存优化" class="header-anchor">#</a> <strong>25.什么是长缓存,在 webpack 中如何做到长缓存优化</strong></h2> <p>浏览器在用户访问页面的时候，为了加快加载速度，会对用户访问的静态资源进行存储，但是每一次代码升级或者更新，都需要浏览器去下载新的代码，最方便和最简单的更新方式就是引入新的文件名称。</p> <p>在 webpack 中，可以在 output 给出输出的文件制定 chunkhash，并且分离经常更新的代码和框架代码，通过 NameModulesPlugin 或者 HashedModulesPlugin 使再次打包文件名不变。</p> <h2 id="_26-什么是tree-sharking"><a href="#_26-什么是tree-sharking" class="header-anchor">#</a> 26.什么是Tree-sharking</h2> <p>指打包中去除那些引入了但在代码中没用到的死代码</p> <p>在 wepack 中 js treeshaking 通过 UglifyJsPlugin 来进行，css 中通过 purify-CSS 来进行。</p> <h2 id="_27-webpack-dev-server和http服务器的区别"><a href="#_27-webpack-dev-server和http服务器的区别" class="header-anchor">#</a> 27.webpack-dev-server和http服务器的区别</h2> <p>webpack-dev-server 使用内存来存储 webpack 开发环境下的打包文件，并且可以使用模块热更新，比传统的 http 服务对开发更加有效。</p> <h2 id="_28-webpack3和webpack4的区别"><a href="#_28-webpack3和webpack4的区别" class="header-anchor">#</a> 28.webpack3和webpack4的区别</h2> <p>mode/–mode 参数，新增了 mode/–mode 参数来表示是开发还是生产（development/production）production 侧重于打包后的文件大小，development 侧重于 goujiansud 移除 loaders，必须使用 rules（在 3 版本的时候 loaders 和 rules 是共存的但是到 4 的时候只允许使用 rules）移除了 CommonsChunkPlugin (提取公共代码)，用 optimization.splitChunks 和 optimization.runtimeChunk 来代替支持 es6 的方式导入 JSON 文件，并且可以过滤无用的代码</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">5/8/2024, 3:01:19 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/webpack/webpack的runtime做了什么事情.html" class="prev">
        webpack的runtime做了什么事情
      </a></span> <span class="next"><a href="/webpack/什么是 AST及其应用.html">
        什么是 AST及其应用
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.07981acf.js" defer></script><script src="/assets/js/2.57da4f88.js" defer></script><script src="/assets/js/1.a76cc220.js" defer></script><script src="/assets/js/150.ff7b0269.js" defer></script>
  </body>
</html>
