(window.webpackJsonp=window.webpackJsonp||[]).push([[141],{433:function(e,s,t){"use strict";t.r(s);var o=t(4),r=Object(o.a)({},(function(){var e=this,s=e._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"core-js-是做什么用的"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#core-js-是做什么用的"}},[e._v("#")]),e._v(" core-js 是做什么用的？")]),e._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/zloirock/core-js",target:"_blank",rel:"noopener noreferrer"}},[e._v("core-js (opens new window)"),s("OutboundLink")],1),e._v("是关于 ES 标准最出名的 "),s("code",[e._v("polyfill")]),e._v("，polyfill 意指当浏览器不支持某一最新 API 时，它将帮你实现，中文叫做垫片。你也许每天都与它打交道，但你毫不知情。")]),e._v(" "),s("blockquote",[s("p",[e._v("有一段时间，当你执行 "),s("code",[e._v("npm install")]),e._v(" 并且项目依赖 "),s("code",[e._v("core-js")]),e._v(" 时，会发现 "),s("code",[e._v("core-js")]),e._v(" 的作者正借助于 "),s("code",[e._v("npm postinstall")]),e._v(" 在找工作。")])]),e._v(" "),s("p",[e._v("由于垫片的存在，打包后体积便会增加，所需支持的浏览器版本 越高，垫片越少，体积就会越小。")]),e._v(" "),s("p",[e._v("以下代码便是 "),s("code",[e._v("Array.from")]),e._v("(ES6) 的垫片代码，有了它的存在，在任意浏览器中都可以使用 "),s("code",[e._v("Array.from")]),e._v(" 这个 API。")]),e._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Production steps of ECMA-262, Edition 6, 22.1.2.1")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("if")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("!")]),e._v("Array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("from"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  Array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[e._v("from")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=>")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// 省略若干代码 }")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),s("p",[s("strong",[e._v("而 "),s("code",[e._v("core-js")]),e._v(" 的伟大之处是它包含了所有 "),s("code",[e._v("ES6+")]),e._v(" 的 polyfill，并集成在 "),s("code",[e._v("babel")]),e._v(" 等编译工具之中")])]),e._v(" "),s("p",[e._v("试举一例:")]),e._v(" "),s("p",[e._v("你在开发环境使用了 "),s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise/any",target:"_blank",rel:"noopener noreferrer"}},[e._v("Promise.any (opens new window)"),s("OutboundLink")],1),e._v("，而它属于 "),s("code",[e._v("ES2021")]),e._v(" 新出的 API，在部分浏览器里尚未实现，同时，你又使用了 "),s("code",[e._v("ES2020")]),e._v(" 新出的操作符 "),s("code",[e._v("?.")]),e._v("。")]),e._v(" "),s("p",[e._v("为了使代码能够在大部分浏览器里能够实现，你将会使用 "),s("code",[e._v("babel")]),e._v(" 或者 "),s("code",[e._v("swc")]),e._v(" 将代码编译为 ES5。")]),e._v(" "),s("p",[s("strong",[e._v("但是此时你会发现问题，*如果不做任何配置*，"),s("code",[e._v("babel")]),e._v("/"),s("code",[e._v("swc")]),e._v(" 只能处理操作符，而无法处理新的 API。以下代码会报错")])]),e._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/shfshanyue/assets@master/src/babel.j056lzjd1g0.png",alt:"babel"}})]),e._v(" "),s("p",[e._v("好消息是，"),s("code",[e._v("core-js")]),e._v(" 已集成到了 "),s("code",[e._v("babel")]),e._v("/"),s("code",[e._v("swc")]),e._v(" 之中，你可以使用 "),s("code",[e._v("@babel/preset-env")]),e._v(" 或者 "),s("code",[e._v("@babel/polyfill")]),e._v(" 进行配置，详见文档 "),s("a",{attrs:{href:"https://github.com/zloirock/core-js",target:"_blank",rel:"noopener noreferrer"}},[e._v("core-js (opens new window)"),s("OutboundLink")],1),e._v("。"),s("strong",[e._v("通过配置，"),s("code",[e._v("babel")]),e._v(" 编译代码后将会自动包含所需的 polyfill")]),e._v("，如下所示。")]),e._v(" "),s("ul",[s("li",[e._v("[点击查看以下代码在线演示(opens new window)](https://babeljs.io/repl#?browsers=defaults%2C not ie 11%2C not ie_mob 11&build=&builtIns=usage&corejs=3.6&spec=false&loose=false&code_lz=AoJw9gtglgzgpgOgIYDsCeAKA2gZgLoCUCALgBZwoZgAEAvAHzUDGYKMYANoh2AOZUECAKCEs2xajVrUUAVw4cRY9lwQ9-YAPzJtAIwJA&debug=false&forceAllTransforms=true&shippedProposals=false&circleciRepo=&evaluate=false&fileSize=false&timeTravel=false&sourceType=module&lineWrap=true&presets=env&prettier=false&targets=&version=7.15.8&externalPlugins=&assumptions={})")])]),e._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/shfshanyue/assets@master/src/babel-preset.4rbb4gbe77o0.png",alt:"babel-preset-env"}})])])}),[],!1,null,null,null);s.default=r.exports}}]);